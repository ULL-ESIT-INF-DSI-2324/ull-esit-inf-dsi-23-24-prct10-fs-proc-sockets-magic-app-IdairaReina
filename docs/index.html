<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>ull-esit-inf-dsi-23-24-prct10-fs-proc-sockets-magic-app-idairareina</title><meta name="description" content="Documentation for ull-esit-inf-dsi-23-24-prct10-fs-proc-sockets-magic-app-idairareina"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">ull-esit-inf-dsi-23-24-prct10-fs-proc-sockets-magic-app-idairareina</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h2>ull-esit-inf-dsi-23-24-prct10-fs-proc-sockets-magic-app-idairareina</h2></div><div class="tsd-panel tsd-typography"><a id="md:práctica-10---aplicación-cliente-servidor-para-coleccionistas-de-cartas-magic" class="tsd-anchor"></a><h1><a href="#md:práctica-10---aplicación-cliente-servidor-para-coleccionistas-de-cartas-magic">Práctica 10 - Aplicación cliente-servidor para coleccionistas de cartas Magic</a></h1><ul>
<li>Grado en Ingenería Informática</li>
<li>Asignatura: Desarrollo de sistemas informáticos</li>
<li>Curso: 2024</li>
<li>Alumno: Idaira Reina González (alu0101398495)</li>
<li>Universidad de La Laguna</li>
</ul>
<a id="md:índice" class="tsd-anchor"></a><h2><a href="#md:índice">Índice</a></h2><ul>
<li><a href="#md:introduccion">1. Introduccion</a></li>
<li><a href="#md:desarrollo">2. Desarrollo de la aplicación</a></li>
<li><a href="#md:tests">3. Tests realizados</a></li>
<li><a href="#md:pe102">4. Ejercicios realizados en el pe102</a></li>
<li><a href="#md:conclusion">5. Dificultades y conclusion</a></li>
<li><a href="#md:referencias">6. Referencias</a></li>
</ul>
<a id="md:1-introducción-" class="tsd-anchor"></a><h2><a href="#md:1-introducción-">1. Introducción <a name="introduccion"></a></a></h2><p>En esta práctica, se abordará la extensión de la aplicación previamente desarrollada para coleccionistas de cartas Magic, como se detalla en la Práctica 9. La tarea consiste en la creación de un sistema de servidor y cliente utilizando los recursos proporcionados por los sockets integrados en el módulo net de Node.js.</p>
<p>Las funcionalidades disponibles para el cliente serán las mismas que fueron implementadas en la etapa anterior: agregar, modificar, eliminar, listar y visualizar la colección de cartas asociada a un usuario específico. La interacción del usuario con la aplicación cliente se realizará exclusivamente a través de la interfaz de línea de comandos.</p>
<p>Simultáneamente, en el servidor, la gestión de la información referente a las cartas Magic se llevará a cabo mediante el almacenamiento en archivos JSON dentro del sistema de archivos. Este enfoque sigue la misma estructura de directorios adoptada en la Práctica 9.</p>
<a id="md:2-desarrollo-de-la-aplicación-" class="tsd-anchor"></a><h2><a href="#md:2-desarrollo-de-la-aplicación-">2. Desarrollo de la aplicación <a name="desarrollo"></a></a></h2><p>En primer lugar se explica como está desarrollada la aplicación, es decir, el contenido de cada uno de los ficheros que la componen:</p>
<a id="md:filemanagerts" class="tsd-anchor"></a><h3><a href="#md:filemanagerts"><a href="https://github.com/ULL-ESIT-INF-DSI-2324/ull-esit-inf-dsi-23-24-prct10-fs-proc-sockets-magic-app-IdairaReina/blob/main/src/cliente-servidor/filemanager.ts">filemanager.ts</a></a></h3><p>Este archivo contiene la definición de la clase FileManager, que se encarga de administrar la creación, lectura, modificación y eliminación de archivos JSON que representan cartas de usuarios en el sistema.</p>
<p><strong>Contenido:</strong>
Definición de la clase FileManager.
Métodos para agregar, eliminar, modificar, listar y mostrar cartas de usuarios.
Lógica para leer y escribir archivos JSON en el sistema de archivos.
Implementación de rutas de archivos y directorios para almacenar datos de usuarios y cartas.</p>
<p><strong>Métodos principales:</strong>
addCard(userId, cardData, callback): Agrega una nueva carta para un usuario específico.
deleteCard(userId, cardId, callback): Elimina una carta de un usuario.
modifyCard(userId, cardId, newCardData, callback): Modifica los datos de una carta existente.
listCard(userId, callback): Lista todas las cartas de un usuario.
showCard(userId, cardId, callback): Muestra los detalles de una carta específica de un usuario.</p>
<p>El código correspondiente a esta parte:</p>
<pre><code class="language-ts"><span class="hl-0">import</span><span class="hl-1"> </span><span class="hl-2">fs</span><span class="hl-1"> </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;fs&#39;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> </span><span class="hl-2">chalk</span><span class="hl-1"> </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;chalk&#39;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">CardData</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;./card.js&#39;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> </span><span class="hl-4">*</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-2">path</span><span class="hl-1"> </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;path&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">/**</span><br/><span class="hl-5"> * Class to manage the file system for user cards</span><br/><span class="hl-5"> */</span><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-6">FileManager</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-4">static</span><span class="hl-1"> </span><span class="hl-2">instance</span><span class="hl-1">: </span><span class="hl-6">FileManager</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-2">userDataDirectory</span><span class="hl-1"> = </span><span class="hl-3">&#39;users&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-4">constructor</span><span class="hl-1">() {}</span><br/><br/><span class="hl-1">  </span><span class="hl-5">/**</span><br/><span class="hl-5">   * Method to get the instance of the FileManager</span><br/><span class="hl-5">   * </span><span class="hl-4">@returns</span><span class="hl-5"> the instance of the FileManager</span><br/><span class="hl-5">   */</span><br/><span class="hl-1">  </span><span class="hl-4">public</span><span class="hl-1"> </span><span class="hl-4">static</span><span class="hl-1"> </span><span class="hl-7">getInstance</span><span class="hl-1">(): </span><span class="hl-6">FileManager</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (!</span><span class="hl-2">FileManager</span><span class="hl-1">.</span><span class="hl-2">instance</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-2">FileManager</span><span class="hl-1">.</span><span class="hl-2">instance</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-7">FileManager</span><span class="hl-1">();</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">FileManager</span><span class="hl-1">.</span><span class="hl-2">instance</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1"> </span><span class="hl-5">// Método para agregar una carta al sistema de archivos del usuario</span><br/><span class="hl-4">public</span><span class="hl-1"> </span><span class="hl-7">addCard</span><span class="hl-1">(</span><span class="hl-2">userId</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1">, </span><span class="hl-2">cardData</span><span class="hl-1">: </span><span class="hl-6">CardData</span><span class="hl-1">, </span><span class="hl-7">callback</span><span class="hl-1">: (</span><span class="hl-2">error</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1"> | </span><span class="hl-6">undefined</span><span class="hl-1">, </span><span class="hl-2">result</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1"> | </span><span class="hl-6">undefined</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-6">void</span><span class="hl-1">): </span><span class="hl-6">void</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">// Se define la ruta del directorio del usuario</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">userDirectory</span><span class="hl-1"> = </span><span class="hl-3">`./users/</span><span class="hl-4">${</span><span class="hl-2">userId</span><span class="hl-4">}</span><span class="hl-3">`</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Se verifica si el directorio del usuario ya existe</span><br/><span class="hl-1">  </span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-7">stat</span><span class="hl-1">(</span><span class="hl-2">userDirectory</span><span class="hl-1">, (</span><span class="hl-2">err</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">err</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-5">// Si no existe, se crea el directorio</span><br/><span class="hl-1">          </span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-7">mkdir</span><span class="hl-1">(</span><span class="hl-2">userDirectory</span><span class="hl-1">, { </span><span class="hl-2">recursive:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1"> }, (</span><span class="hl-2">err</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">              </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">err</span><span class="hl-1">) {</span><br/><span class="hl-1">                  </span><span class="hl-5">// Si ocurre un error al crear el directorio, se llama al callback con el error</span><br/><span class="hl-1">                  </span><span class="hl-7">callback</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-2">red</span><span class="hl-1">.</span><span class="hl-7">bold</span><span class="hl-1">(</span><span class="hl-2">err</span><span class="hl-1">.</span><span class="hl-2">message</span><span class="hl-1">), </span><span class="hl-4">undefined</span><span class="hl-1">);</span><br/><span class="hl-1">              } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">                  </span><span class="hl-5">// Si la operación es exitosa, se procede a escribir la carta en el archivo correspondiente</span><br/><span class="hl-1">                  </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">cardFilePath</span><span class="hl-1"> = </span><span class="hl-3">`</span><span class="hl-4">${</span><span class="hl-2">userDirectory</span><span class="hl-4">}</span><span class="hl-3">/</span><span class="hl-4">${</span><span class="hl-2">cardData</span><span class="hl-9">.</span><span class="hl-2">id</span><span class="hl-4">}</span><span class="hl-3">.json`</span><span class="hl-1">;</span><br/><span class="hl-1">                  </span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-7">writeFile</span><span class="hl-1">(</span><span class="hl-2">cardFilePath</span><span class="hl-1">, </span><span class="hl-8">JSON</span><span class="hl-1">.</span><span class="hl-7">stringify</span><span class="hl-1">(</span><span class="hl-2">cardData</span><span class="hl-1">), (</span><span class="hl-2">err</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">                      </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">err</span><span class="hl-1">) {</span><br/><span class="hl-1">                          </span><span class="hl-5">// Si ocurre un error al escribir el archivo, se llama al callback con el error</span><br/><span class="hl-1">                          </span><span class="hl-7">callback</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-2">red</span><span class="hl-1">.</span><span class="hl-7">bold</span><span class="hl-1">(</span><span class="hl-2">err</span><span class="hl-1">.</span><span class="hl-2">message</span><span class="hl-1">), </span><span class="hl-4">undefined</span><span class="hl-1">);</span><br/><span class="hl-1">                      } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">                          </span><span class="hl-5">// Si la operación es exitosa, se llama al callback con un mensaje de éxito</span><br/><span class="hl-1">                          </span><span class="hl-7">callback</span><span class="hl-1">(</span><span class="hl-4">undefined</span><span class="hl-1">, </span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-2">green</span><span class="hl-1">.</span><span class="hl-7">bold</span><span class="hl-1">(</span><span class="hl-3">`Card added to user </span><span class="hl-4">${</span><span class="hl-2">userId</span><span class="hl-4">}</span><span class="hl-3">&#39;s collection`</span><span class="hl-1">));</span><br/><span class="hl-1">                      }</span><br/><span class="hl-1">                  });</span><br/><span class="hl-1">              }</span><br/><span class="hl-1">          });</span><br/><span class="hl-1">      } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-5">// Si el directorio del usuario ya existe, se procede a verificar si el archivo de la carta ya existe</span><br/><span class="hl-1">          </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">cardFilePath</span><span class="hl-1"> = </span><span class="hl-3">`</span><span class="hl-4">${</span><span class="hl-2">userDirectory</span><span class="hl-4">}</span><span class="hl-3">/</span><span class="hl-4">${</span><span class="hl-2">cardData</span><span class="hl-9">.</span><span class="hl-2">id</span><span class="hl-4">}</span><span class="hl-3">.json`</span><span class="hl-1">;</span><br/><span class="hl-1">          </span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-7">stat</span><span class="hl-1">(</span><span class="hl-2">cardFilePath</span><span class="hl-1">, (</span><span class="hl-2">err</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">              </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">err</span><span class="hl-1">) {</span><br/><span class="hl-1">                  </span><span class="hl-5">// Si no existe, se procede a escribir la carta en el archivo correspondiente</span><br/><span class="hl-1">                  </span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-7">writeFile</span><span class="hl-1">(</span><span class="hl-2">cardFilePath</span><span class="hl-1">, </span><span class="hl-8">JSON</span><span class="hl-1">.</span><span class="hl-7">stringify</span><span class="hl-1">(</span><span class="hl-2">cardData</span><span class="hl-1">), (</span><span class="hl-2">err</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">                      </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">err</span><span class="hl-1">) {</span><br/><span class="hl-1">                          </span><span class="hl-5">// Si ocurre un error al escribir el archivo, se llama al callback con el error</span><br/><span class="hl-1">                          </span><span class="hl-7">callback</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-2">red</span><span class="hl-1">.</span><span class="hl-7">bold</span><span class="hl-1">(</span><span class="hl-2">err</span><span class="hl-1">.</span><span class="hl-2">message</span><span class="hl-1">), </span><span class="hl-4">undefined</span><span class="hl-1">);</span><br/><span class="hl-1">                      } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">                          </span><span class="hl-5">// Si la operación es exitosa, se llama al callback con un mensaje de éxito</span><br/><span class="hl-1">                          </span><span class="hl-7">callback</span><span class="hl-1">(</span><span class="hl-4">undefined</span><span class="hl-1">, </span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-2">green</span><span class="hl-1">.</span><span class="hl-7">bold</span><span class="hl-1">(</span><span class="hl-3">`Card added to user </span><span class="hl-4">${</span><span class="hl-2">userId</span><span class="hl-4">}</span><span class="hl-3">&#39;s collection`</span><span class="hl-1">));</span><br/><span class="hl-1">                      }</span><br/><span class="hl-1">                  });</span><br/><span class="hl-1">              } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">                  </span><span class="hl-5">// Si ya existe un archivo con el mismo ID, se llama al callback con un mensaje de error</span><br/><span class="hl-1">                  </span><span class="hl-7">callback</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-2">red</span><span class="hl-1">.</span><span class="hl-7">bold</span><span class="hl-1">(</span><span class="hl-3">`A card with the same ID already exists in user </span><span class="hl-4">${</span><span class="hl-2">userId</span><span class="hl-4">}</span><span class="hl-3">&#39;s collection`</span><span class="hl-1">), </span><span class="hl-4">undefined</span><span class="hl-1">);</span><br/><span class="hl-1">              }</span><br/><span class="hl-1">          });</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">  });</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-4">public</span><span class="hl-1"> </span><span class="hl-7">deleteCard</span><span class="hl-1">(</span><span class="hl-2">userId</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1">, </span><span class="hl-2">cardId</span><span class="hl-1">: </span><span class="hl-6">number</span><span class="hl-1">, </span><span class="hl-7">callback</span><span class="hl-1">: (</span><span class="hl-2">error</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1"> | </span><span class="hl-6">undefined</span><span class="hl-1">, </span><span class="hl-2">result</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1"> | </span><span class="hl-6">undefined</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-6">void</span><span class="hl-1">): </span><span class="hl-6">void</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">cardFilePath</span><span class="hl-1"> = </span><span class="hl-3">`./users/</span><span class="hl-4">${</span><span class="hl-2">userId</span><span class="hl-4">}</span><span class="hl-3">/</span><span class="hl-4">${</span><span class="hl-2">cardId</span><span class="hl-4">}</span><span class="hl-3">.json`</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-7">unlink</span><span class="hl-1">(</span><span class="hl-2">cardFilePath</span><span class="hl-1">, (</span><span class="hl-2">err</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">err</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-7">callback</span><span class="hl-1">(</span><span class="hl-3">`Error al eliminar la carta: </span><span class="hl-4">${</span><span class="hl-2">err</span><span class="hl-9">.</span><span class="hl-2">message</span><span class="hl-4">}</span><span class="hl-3">`</span><span class="hl-1">, </span><span class="hl-4">undefined</span><span class="hl-1">);</span><br/><span class="hl-1">      } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-7">callback</span><span class="hl-1">(</span><span class="hl-4">undefined</span><span class="hl-1">, </span><span class="hl-3">`Carta eliminada correctamente del usuario </span><span class="hl-4">${</span><span class="hl-2">userId</span><span class="hl-4">}</span><span class="hl-3">`</span><span class="hl-1">);</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">  });</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-4">public</span><span class="hl-1"> </span><span class="hl-7">modifyCard</span><span class="hl-1">(</span><span class="hl-2">userId</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1">, </span><span class="hl-2">cardId</span><span class="hl-1">: </span><span class="hl-6">number</span><span class="hl-1">, </span><span class="hl-2">newCardData</span><span class="hl-1">: </span><span class="hl-6">CardData</span><span class="hl-1">, </span><span class="hl-7">callback</span><span class="hl-1">: (</span><span class="hl-2">error</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1"> | </span><span class="hl-6">undefined</span><span class="hl-1">, </span><span class="hl-2">result</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1"> | </span><span class="hl-6">undefined</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-6">void</span><span class="hl-1">): </span><span class="hl-6">void</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">userDir</span><span class="hl-1"> = </span><span class="hl-2">path</span><span class="hl-1">.</span><span class="hl-7">join</span><span class="hl-1">(</span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">userDataDirectory</span><span class="hl-1">, </span><span class="hl-2">userId</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">filePath</span><span class="hl-1"> = </span><span class="hl-2">path</span><span class="hl-1">.</span><span class="hl-7">join</span><span class="hl-1">(</span><span class="hl-2">userDir</span><span class="hl-1">, </span><span class="hl-3">`</span><span class="hl-4">${</span><span class="hl-2">cardId</span><span class="hl-4">}</span><span class="hl-3">.json`</span><span class="hl-1">);</span><br/><br/><span class="hl-1">    </span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-7">readFile</span><span class="hl-1">(</span><span class="hl-2">filePath</span><span class="hl-1">, </span><span class="hl-3">&#39;utf-8&#39;</span><span class="hl-1">, (</span><span class="hl-2">err</span><span class="hl-1">, </span><span class="hl-2">data</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">err</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-7">callback</span><span class="hl-1">(</span><span class="hl-3">&#39;No se encontró la carta especificada.&#39;</span><span class="hl-1">, </span><span class="hl-4">undefined</span><span class="hl-1">);</span><br/><span class="hl-1">        } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-0">try</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">existingCardData</span><span class="hl-1">: </span><span class="hl-6">CardData</span><span class="hl-1"> = </span><span class="hl-8">JSON</span><span class="hl-1">.</span><span class="hl-7">parse</span><span class="hl-1">(</span><span class="hl-2">data</span><span class="hl-1">);</span><br/><span class="hl-1">                </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">modifiedCardData</span><span class="hl-1">: </span><span class="hl-6">CardData</span><span class="hl-1"> = { ...</span><span class="hl-2">existingCardData</span><span class="hl-1">, ...</span><span class="hl-2">newCardData</span><span class="hl-1"> };</span><br/><br/><span class="hl-1">                </span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-7">writeFile</span><span class="hl-1">(</span><span class="hl-2">filePath</span><span class="hl-1">, </span><span class="hl-8">JSON</span><span class="hl-1">.</span><span class="hl-7">stringify</span><span class="hl-1">(</span><span class="hl-2">modifiedCardData</span><span class="hl-1">, </span><span class="hl-4">null</span><span class="hl-1">, </span><span class="hl-10">2</span><span class="hl-1">), (</span><span class="hl-2">err</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">err</span><span class="hl-1">) {</span><br/><span class="hl-1">                        </span><span class="hl-7">callback</span><span class="hl-1">(</span><span class="hl-3">&#39;Error al modificar la carta.&#39;</span><span class="hl-1">, </span><span class="hl-4">undefined</span><span class="hl-1">);</span><br/><span class="hl-1">                    } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">                        </span><span class="hl-7">callback</span><span class="hl-1">(</span><span class="hl-4">undefined</span><span class="hl-1">, </span><span class="hl-3">&#39;Carta modificada correctamente.&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">                    }</span><br/><span class="hl-1">                });</span><br/><span class="hl-1">            } </span><span class="hl-0">catch</span><span class="hl-1"> (</span><span class="hl-2">error</span><span class="hl-1">) {</span><br/><span class="hl-1">                </span><span class="hl-7">callback</span><span class="hl-1">(</span><span class="hl-3">&#39;Error al procesar los datos de la carta.&#39;</span><span class="hl-1">, </span><span class="hl-4">undefined</span><span class="hl-1">);</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-4">public</span><span class="hl-1"> </span><span class="hl-7">listCard</span><span class="hl-1">(</span><span class="hl-2">userId</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1">, </span><span class="hl-7">callback</span><span class="hl-1">: (</span><span class="hl-2">error</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1"> | </span><span class="hl-6">undefined</span><span class="hl-1">, </span><span class="hl-2">result</span><span class="hl-1">: </span><span class="hl-6">CardData</span><span class="hl-1">[] | </span><span class="hl-6">undefined</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-6">void</span><span class="hl-1">): </span><span class="hl-6">void</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">userDir</span><span class="hl-1"> = </span><span class="hl-2">path</span><span class="hl-1">.</span><span class="hl-7">join</span><span class="hl-1">(</span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">userDataDirectory</span><span class="hl-1">, </span><span class="hl-2">userId</span><span class="hl-1">);</span><br/><br/><span class="hl-1">    </span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-7">readdir</span><span class="hl-1">(</span><span class="hl-2">userDir</span><span class="hl-1">, (</span><span class="hl-2">err</span><span class="hl-1">, </span><span class="hl-2">files</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">err</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-7">callback</span><span class="hl-1">(</span><span class="hl-3">&#39;Error al listar las cartas del usuario.&#39;</span><span class="hl-1">, </span><span class="hl-4">undefined</span><span class="hl-1">);</span><br/><span class="hl-1">        } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">cardFiles</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1">[] = </span><span class="hl-2">files</span><span class="hl-1">.</span><span class="hl-7">filter</span><span class="hl-1">(</span><span class="hl-2">file</span><span class="hl-1"> </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-2">file</span><span class="hl-1">.</span><span class="hl-7">endsWith</span><span class="hl-1">(</span><span class="hl-3">&#39;.json&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">            </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">cards</span><span class="hl-1">: </span><span class="hl-6">CardData</span><span class="hl-1">[] = [];</span><br/><br/><span class="hl-1">            </span><span class="hl-5">// Leer cada archivo de carta</span><br/><span class="hl-1">            </span><span class="hl-2">cardFiles</span><span class="hl-1">.</span><span class="hl-7">forEach</span><span class="hl-1">(</span><span class="hl-2">file</span><span class="hl-1"> </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">filePath</span><span class="hl-1"> = </span><span class="hl-2">path</span><span class="hl-1">.</span><span class="hl-7">join</span><span class="hl-1">(</span><span class="hl-2">userDir</span><span class="hl-1">, </span><span class="hl-2">file</span><span class="hl-1">);</span><br/><span class="hl-1">                </span><span class="hl-5">//const cardId = parseInt(path.parse(file).name); // Obtener el ID de la carta del nombre del archivo</span><br/><br/><span class="hl-1">                </span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-7">readFile</span><span class="hl-1">(</span><span class="hl-2">filePath</span><span class="hl-1">, </span><span class="hl-3">&#39;utf-8&#39;</span><span class="hl-1">, (</span><span class="hl-2">err</span><span class="hl-1">, </span><span class="hl-2">data</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">err</span><span class="hl-1">) {</span><br/><span class="hl-1">                        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">error</span><span class="hl-1">(</span><span class="hl-3">&#39;Error al leer el archivo:&#39;</span><span class="hl-1">, </span><span class="hl-2">err</span><span class="hl-1">);</span><br/><span class="hl-1">                    } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">                        </span><span class="hl-0">try</span><span class="hl-1"> {</span><br/><span class="hl-1">                            </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">cardData</span><span class="hl-1">: </span><span class="hl-6">CardData</span><span class="hl-1"> = </span><span class="hl-8">JSON</span><span class="hl-1">.</span><span class="hl-7">parse</span><span class="hl-1">(</span><span class="hl-2">data</span><span class="hl-1">);</span><br/><span class="hl-1">                            </span><span class="hl-2">cards</span><span class="hl-1">.</span><span class="hl-7">push</span><span class="hl-1">(</span><span class="hl-2">cardData</span><span class="hl-1">);</span><br/><span class="hl-1">                        } </span><span class="hl-0">catch</span><span class="hl-1"> (</span><span class="hl-2">error</span><span class="hl-1">) {</span><br/><span class="hl-1">                            </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">error</span><span class="hl-1">(</span><span class="hl-3">&#39;Error al procesar los datos de la carta:&#39;</span><span class="hl-1">, </span><span class="hl-2">error</span><span class="hl-1">);</span><br/><span class="hl-1">                        }</span><br/><span class="hl-1">                    }</span><br/><br/><span class="hl-1">                    </span><span class="hl-5">// Verificar si se han leído todas las cartas</span><br/><span class="hl-1">                    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">cards</span><span class="hl-1">.</span><span class="hl-2">length</span><span class="hl-1"> === </span><span class="hl-2">cardFiles</span><span class="hl-1">.</span><span class="hl-2">length</span><span class="hl-1">) {</span><br/><span class="hl-1">                        </span><span class="hl-7">callback</span><span class="hl-1">(</span><span class="hl-4">undefined</span><span class="hl-1">, </span><span class="hl-2">cards</span><span class="hl-1">);</span><br/><span class="hl-1">                    }</span><br/><span class="hl-1">                });</span><br/><span class="hl-1">            });</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-4">public</span><span class="hl-1"> </span><span class="hl-7">showCard</span><span class="hl-1">(</span><span class="hl-2">userId</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1">, </span><span class="hl-2">cardId</span><span class="hl-1">: </span><span class="hl-6">number</span><span class="hl-1">, </span><span class="hl-7">callback</span><span class="hl-1">: (</span><span class="hl-2">error</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1"> | </span><span class="hl-6">undefined</span><span class="hl-1">, </span><span class="hl-2">result</span><span class="hl-1">: </span><span class="hl-6">CardData</span><span class="hl-1"> | </span><span class="hl-6">undefined</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-6">void</span><span class="hl-1">): </span><span class="hl-6">void</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">cardFilePath</span><span class="hl-1"> = </span><span class="hl-3">`./users/</span><span class="hl-4">${</span><span class="hl-2">userId</span><span class="hl-4">}</span><span class="hl-3">/</span><span class="hl-4">${</span><span class="hl-2">cardId</span><span class="hl-4">}</span><span class="hl-3">.json`</span><span class="hl-1">;</span><br/><br/><span class="hl-1">    </span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-7">readFile</span><span class="hl-1">(</span><span class="hl-2">cardFilePath</span><span class="hl-1">, </span><span class="hl-3">&#39;utf-8&#39;</span><span class="hl-1">, (</span><span class="hl-2">err</span><span class="hl-1">, </span><span class="hl-2">data</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">err</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-7">callback</span><span class="hl-1">(</span><span class="hl-3">&#39;Error al mostrar la carta.&#39;</span><span class="hl-1">, </span><span class="hl-4">undefined</span><span class="hl-1">);</span><br/><span class="hl-1">        } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-0">try</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">cardData</span><span class="hl-1">: </span><span class="hl-6">CardData</span><span class="hl-1"> = </span><span class="hl-8">JSON</span><span class="hl-1">.</span><span class="hl-7">parse</span><span class="hl-1">(</span><span class="hl-2">data</span><span class="hl-1">);</span><br/><span class="hl-1">                </span><span class="hl-7">callback</span><span class="hl-1">(</span><span class="hl-4">undefined</span><span class="hl-1">, </span><span class="hl-2">cardData</span><span class="hl-1">);</span><br/><span class="hl-1">            } </span><span class="hl-0">catch</span><span class="hl-1"> (</span><span class="hl-2">error</span><span class="hl-1">) {</span><br/><span class="hl-1">                </span><span class="hl-7">callback</span><span class="hl-1">(</span><span class="hl-3">&#39;Error al procesar los datos de la carta.&#39;</span><span class="hl-1">, </span><span class="hl-4">undefined</span><span class="hl-1">);</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">}</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<a id="md:clientts" class="tsd-anchor"></a><h3><a href="#md:clientts"><a href="https://github.com/ULL-ESIT-INF-DSI-2324/ull-esit-inf-dsi-23-24-prct10-fs-proc-sockets-magic-app-IdairaReina/blob/main/src/cliente-servidor/client.ts">client.ts</a></a></h3><p>Este archivo contiene la implementación del cliente de la aplicación, que se conecta al servidor y envía solicitudes para agregar, eliminar, modificar, listar y mostrar cartas.</p>
<p><strong>Contenido:</strong>
Configuración de la conexión del cliente al servidor.
Implementación de comandos para agregar, eliminar, modificar, listar y mostrar cartas utilizando la biblioteca yargs.
Manejo de eventos de conexión, envío y recepción de datos con el servidor.</p>
<p>El código correspondiente a esta parte:</p>
<pre><code class="language-ts"><span class="hl-0">import</span><span class="hl-1"> </span><span class="hl-4">*</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-2">net</span><span class="hl-1"> </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;net&#39;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> </span><span class="hl-2">yargs</span><span class="hl-1"> </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;yargs&#39;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> </span><span class="hl-2">chalk</span><span class="hl-1"> </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;chalk&#39;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">CardData</span><span class="hl-1">, </span><span class="hl-2">CardType</span><span class="hl-1">, </span><span class="hl-2">Color</span><span class="hl-1">, </span><span class="hl-2">Rarity</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;./card.js&#39;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">hideBin</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;yargs/helpers&#39;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">userCardsMap</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;./server.js&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">client</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-2">net</span><span class="hl-1">.</span><span class="hl-7">Socket</span><span class="hl-1">();</span><br/><br/><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-7">connect</span><span class="hl-1">(</span><span class="hl-10">60300</span><span class="hl-1">, </span><span class="hl-3">&#39;localhost&#39;</span><span class="hl-1">, () </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-3">&#39;Conectado al servidor&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><br/><br/><span class="hl-1">    </span><span class="hl-5">// Obtener los argumentos de la línea de comandos utilizando yargs</span><br/><span class="hl-1">    </span><span class="hl-7">yargs</span><span class="hl-1">(</span><span class="hl-7">hideBin</span><span class="hl-1">(</span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">))</span><br/><span class="hl-1">        .</span><span class="hl-7">command</span><span class="hl-1">(</span><br/><span class="hl-1">            </span><span class="hl-3">&#39;add&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-3">&#39;Adds a card to the collection&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            {</span><br/><span class="hl-1">                </span><span class="hl-2">user:</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&#39;User name&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">                },</span><br/><span class="hl-1">                </span><span class="hl-2">id:</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&#39;Card ID&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;number&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><br/><span class="hl-1">                },</span><br/><span class="hl-1">                </span><span class="hl-2">name:</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&#39;Card Name&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><br/><span class="hl-1">                },</span><br/><span class="hl-1">                </span><span class="hl-2">manaCost:</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&#39;Mana Cost&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;number&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><br/><span class="hl-1">                },</span><br/><span class="hl-1">                </span><span class="hl-2">color:</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&#39;Color of the card&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><br/><span class="hl-1">                },</span><br/><span class="hl-1">                </span><span class="hl-2">type:</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&#39;Type of the card&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><br/><span class="hl-1">                },</span><br/><span class="hl-1">                </span><span class="hl-2">rarity:</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&#39;Rarity of the card&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><br/><span class="hl-1">                },</span><br/><span class="hl-1">                </span><span class="hl-2">rulesText:</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&#39;Rules Text of the card&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><br/><span class="hl-1">                },</span><br/><span class="hl-1">                </span><span class="hl-2">power:</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&#39;Power of the card (only for creatures)&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;number&#39;</span><br/><span class="hl-1">                },</span><br/><span class="hl-1">                </span><span class="hl-2">toughness:</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&#39;Toughness of the card (only for creatures)&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;number&#39;</span><br/><span class="hl-1">                },</span><br/><span class="hl-1">                </span><span class="hl-2">loyalty:</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&#39;Loyalty of the card (only for planeswalkers)&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;number&#39;</span><br/><span class="hl-1">                },</span><br/><span class="hl-1">                </span><span class="hl-2">marketValue:</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&#39;Market value of the card&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;number&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><br/><span class="hl-1">                }</span><br/><span class="hl-1">            },</span><br/><span class="hl-1">            (</span><span class="hl-2">argv</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-5">// Crear un objeto CardData con los datos de la carta</span><br/><span class="hl-1">                </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">cardData</span><span class="hl-1">: </span><span class="hl-6">CardData</span><span class="hl-1"> = {</span><br/><span class="hl-1">                    </span><span class="hl-2">id:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">id</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">name:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">name</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">manaCost:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">manaCost</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">color:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">color</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-6">Color</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">type</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-6">CardType</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">rarity:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">rarity</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-6">Rarity</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">rulesText:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">rulesText</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">power:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">power</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">toughness:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">toughness</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">loyalty:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">loyalty</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">marketValue:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">marketValue</span><br/><span class="hl-1">                };</span><br/><br/><span class="hl-1">                </span><span class="hl-5">// Construir la solicitud a enviar al servidor</span><br/><span class="hl-1">                </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">request</span><span class="hl-1"> = {</span><br/><span class="hl-1">                    </span><span class="hl-2">userId:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">user</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">action:</span><span class="hl-1"> </span><span class="hl-3">&#39;add&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">cardData:</span><span class="hl-1"> </span><span class="hl-2">cardData</span><br/><span class="hl-1">                };</span><br/><br/><span class="hl-1">                </span><span class="hl-5">// Convertir la solicitud a una cadena JSON</span><br/><span class="hl-1">                </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">requestData</span><span class="hl-1"> = </span><span class="hl-8">JSON</span><span class="hl-1">.</span><span class="hl-7">stringify</span><span class="hl-1">(</span><span class="hl-2">request</span><span class="hl-1">);</span><br/><span class="hl-1">                </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">requestDataLength</span><span class="hl-1"> = </span><span class="hl-2">Buffer</span><span class="hl-1">.</span><span class="hl-7">byteLength</span><span class="hl-1">(</span><span class="hl-2">requestData</span><span class="hl-1">);</span><br/><br/><span class="hl-1">                </span><span class="hl-5">// Enviar la longitud de los datos de la solicitud primero</span><br/><span class="hl-1">                </span><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-7">write</span><span class="hl-1">(</span><span class="hl-2">Buffer</span><span class="hl-1">.</span><span class="hl-7">from</span><span class="hl-1">(</span><span class="hl-2">requestDataLength</span><span class="hl-1">.</span><span class="hl-7">toString</span><span class="hl-1">()));</span><br/><br/><span class="hl-1">                </span><span class="hl-5">// Luego, enviar los datos de la solicitud</span><br/><span class="hl-1">                </span><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-7">write</span><span class="hl-1">(</span><span class="hl-2">requestData</span><span class="hl-1">);</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">        )</span><br/><span class="hl-1">        .</span><span class="hl-7">command</span><span class="hl-1">(</span><br/><span class="hl-1">            </span><span class="hl-3">&#39;modify&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-3">&#39;Modifies a card in the collection&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            {</span><br/><span class="hl-1">                </span><span class="hl-2">user:</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&#39;User name&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">                },</span><br/><span class="hl-1">                </span><span class="hl-2">id:</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&#39;Card ID&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;number&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><br/><span class="hl-1">                },</span><br/><span class="hl-1">                </span><span class="hl-2">name:</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&#39;Card Name&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;string&#39;</span><br/><span class="hl-1">                },</span><br/><span class="hl-1">                </span><span class="hl-2">manaCost:</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&#39;Mana Cost&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;number&#39;</span><br/><span class="hl-1">                },</span><br/><span class="hl-1">                </span><span class="hl-2">color:</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&#39;Color of the card&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;string&#39;</span><br/><span class="hl-1">                },</span><br/><span class="hl-1">                </span><span class="hl-2">type:</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&#39;Type of the card&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;string&#39;</span><br/><span class="hl-1">                },</span><br/><span class="hl-1">                </span><span class="hl-2">rarity:</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&#39;Rarity of the card&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;string&#39;</span><br/><span class="hl-1">                },</span><br/><span class="hl-1">                </span><span class="hl-2">rulesText:</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&#39;Rules Text of the card&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;string&#39;</span><br/><span class="hl-1">                },</span><br/><span class="hl-1">                </span><span class="hl-2">power:</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&#39;Power of the card (only for creatures)&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;number&#39;</span><br/><span class="hl-1">                },</span><br/><span class="hl-1">                </span><span class="hl-2">toughness:</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&#39;Toughness of the card (only for creatures)&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;number&#39;</span><br/><span class="hl-1">                },</span><br/><span class="hl-1">                </span><span class="hl-2">loyalty:</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&#39;Loyalty of the card (only for planeswalkers)&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;number&#39;</span><br/><span class="hl-1">                },</span><br/><span class="hl-1">                </span><span class="hl-2">marketValue:</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&#39;Market value of the card&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;number&#39;</span><br/><span class="hl-1">                }</span><br/><span class="hl-1">            },</span><br/><span class="hl-1">            (</span><span class="hl-2">argv</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">modifiedData</span><span class="hl-1">: </span><span class="hl-6">Partial</span><span class="hl-1">&lt;</span><span class="hl-6">CardData</span><span class="hl-1">&gt; = {};</span><br/><span class="hl-1">        </span><br/><span class="hl-1">                </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">name</span><span class="hl-1">) </span><span class="hl-2">modifiedData</span><span class="hl-1">.</span><span class="hl-2">name</span><span class="hl-1"> = </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">name</span><span class="hl-1">;</span><br/><span class="hl-1">                </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">manaCost</span><span class="hl-1">) </span><span class="hl-2">modifiedData</span><span class="hl-1">.</span><span class="hl-2">manaCost</span><span class="hl-1"> = </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">manaCost</span><span class="hl-1">;</span><br/><span class="hl-1">                </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">color</span><span class="hl-1">) </span><span class="hl-2">modifiedData</span><span class="hl-1">.</span><span class="hl-2">color</span><span class="hl-1"> = </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">color</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-6">Color</span><span class="hl-1">;</span><br/><span class="hl-1">                </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">type</span><span class="hl-1">) </span><span class="hl-2">modifiedData</span><span class="hl-1">.</span><span class="hl-2">type</span><span class="hl-1"> = </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">type</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-6">CardType</span><span class="hl-1">;</span><br/><span class="hl-1">                </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">rarity</span><span class="hl-1">) </span><span class="hl-2">modifiedData</span><span class="hl-1">.</span><span class="hl-2">rarity</span><span class="hl-1"> = </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">rarity</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-6">Rarity</span><span class="hl-1">;</span><br/><span class="hl-1">                </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">rulesText</span><span class="hl-1">) </span><span class="hl-2">modifiedData</span><span class="hl-1">.</span><span class="hl-2">rulesText</span><span class="hl-1"> = </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">rulesText</span><span class="hl-1">;</span><br/><span class="hl-1">                </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">power</span><span class="hl-1">) </span><span class="hl-2">modifiedData</span><span class="hl-1">.</span><span class="hl-2">power</span><span class="hl-1"> = </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">power</span><span class="hl-1">;</span><br/><span class="hl-1">                </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">toughness</span><span class="hl-1">) </span><span class="hl-2">modifiedData</span><span class="hl-1">.</span><span class="hl-2">toughness</span><span class="hl-1"> = </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">toughness</span><span class="hl-1">;</span><br/><span class="hl-1">                </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">loyalty</span><span class="hl-1">) </span><span class="hl-2">modifiedData</span><span class="hl-1">.</span><span class="hl-2">loyalty</span><span class="hl-1"> = </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">loyalty</span><span class="hl-1">;</span><br/><span class="hl-1">                </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">marketValue</span><span class="hl-1">) </span><span class="hl-2">modifiedData</span><span class="hl-1">.</span><span class="hl-2">marketValue</span><span class="hl-1"> = </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">marketValue</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><br/><span class="hl-1">                </span><span class="hl-5">// Construir la solicitud a enviar al servidor</span><br/><span class="hl-1">                </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">request</span><span class="hl-1"> = {</span><br/><span class="hl-1">                    </span><span class="hl-2">userId:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">user</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">action:</span><span class="hl-1"> </span><span class="hl-3">&#39;modify&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">cardId:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">id</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">modifiedData:</span><span class="hl-1"> </span><span class="hl-2">modifiedData</span><br/><span class="hl-1">                };</span><br/><span class="hl-1">        </span><br/><span class="hl-1">                </span><span class="hl-5">// Convertir la solicitud a una cadena JSON</span><br/><span class="hl-1">                </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">requestData</span><span class="hl-1"> = </span><span class="hl-8">JSON</span><span class="hl-1">.</span><span class="hl-7">stringify</span><span class="hl-1">(</span><span class="hl-2">request</span><span class="hl-1">);</span><br/><span class="hl-1">                </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">requestDataLength</span><span class="hl-1"> = </span><span class="hl-2">Buffer</span><span class="hl-1">.</span><span class="hl-7">byteLength</span><span class="hl-1">(</span><span class="hl-2">requestData</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><br/><span class="hl-1">                </span><span class="hl-5">// Enviar la longitud de los datos de la solicitud primero</span><br/><span class="hl-1">                </span><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-7">write</span><span class="hl-1">(</span><span class="hl-2">Buffer</span><span class="hl-1">.</span><span class="hl-7">from</span><span class="hl-1">(</span><span class="hl-2">requestDataLength</span><span class="hl-1">.</span><span class="hl-7">toString</span><span class="hl-1">()));</span><br/><span class="hl-1">        </span><br/><span class="hl-1">                </span><span class="hl-5">// Luego, enviar los datos de la solicitud</span><br/><span class="hl-1">                </span><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-7">write</span><span class="hl-1">(</span><span class="hl-2">requestData</span><span class="hl-1">);</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">        )        </span><br/><span class="hl-1">        .</span><span class="hl-7">command</span><span class="hl-1">(</span><br/><span class="hl-1">            </span><span class="hl-3">&#39;delete&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-3">&#39;Adds a card to the collection&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            {</span><br/><span class="hl-1">                </span><span class="hl-2">user:</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&#39;User name&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">                },</span><br/><span class="hl-1">                </span><span class="hl-2">id:</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&#39;Card ID&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;number&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><br/><span class="hl-1">                }</span><br/><span class="hl-1">            },</span><br/><span class="hl-1">            (</span><span class="hl-2">argv</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">userId</span><span class="hl-1"> = </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">user</span><span class="hl-1">;</span><br/><span class="hl-1">                </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">cardId</span><span class="hl-1"> = </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">id</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><br/><span class="hl-1">                </span><span class="hl-5">// Buscar el usuario en userCardsMap</span><br/><span class="hl-1">                </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">userCards</span><span class="hl-1"> = </span><span class="hl-2">userCardsMap</span><span class="hl-1">.</span><span class="hl-7">get</span><span class="hl-1">(</span><span class="hl-2">userId</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><br/><span class="hl-1">                </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">userCards</span><span class="hl-1">) {</span><br/><span class="hl-1">                    </span><span class="hl-5">// Buscar la carta por su ID</span><br/><span class="hl-1">                    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">cardToDelete</span><span class="hl-1"> = </span><span class="hl-2">userCards</span><span class="hl-1">.</span><span class="hl-7">find</span><span class="hl-1">(</span><span class="hl-2">card</span><span class="hl-1"> </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-2">card</span><span class="hl-1">.</span><span class="hl-2">id</span><span class="hl-1"> === </span><span class="hl-2">cardId</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><br/><span class="hl-1">                    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">cardToDelete</span><span class="hl-1">) {</span><br/><span class="hl-1">                        </span><span class="hl-5">// Construir la solicitud a enviar al servidor</span><br/><span class="hl-1">                        </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">request</span><span class="hl-1"> = {</span><br/><span class="hl-1">                            </span><span class="hl-2">userId:</span><span class="hl-1"> </span><span class="hl-2">userId</span><span class="hl-1">,</span><br/><span class="hl-1">                            </span><span class="hl-2">action:</span><span class="hl-1"> </span><span class="hl-3">&#39;delete&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                            </span><span class="hl-2">cardData:</span><span class="hl-1"> </span><span class="hl-2">cardToDelete</span><br/><span class="hl-1">                        };</span><br/><span class="hl-1">    </span><br/><span class="hl-1">                        </span><span class="hl-5">// Convertir la solicitud a una cadena JSON</span><br/><span class="hl-1">                        </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">requestData</span><span class="hl-1"> = </span><span class="hl-8">JSON</span><span class="hl-1">.</span><span class="hl-7">stringify</span><span class="hl-1">(</span><span class="hl-2">request</span><span class="hl-1">);</span><br/><span class="hl-1">                        </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">requestDataLength</span><span class="hl-1"> = </span><span class="hl-2">Buffer</span><span class="hl-1">.</span><span class="hl-7">byteLength</span><span class="hl-1">(</span><span class="hl-2">requestData</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><br/><span class="hl-1">                        </span><span class="hl-5">// Enviar la longitud de los datos de la solicitud primero</span><br/><span class="hl-1">                        </span><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-7">write</span><span class="hl-1">(</span><span class="hl-2">Buffer</span><span class="hl-1">.</span><span class="hl-7">from</span><span class="hl-1">(</span><span class="hl-2">requestDataLength</span><span class="hl-1">.</span><span class="hl-7">toString</span><span class="hl-1">()));</span><br/><span class="hl-1">    </span><br/><span class="hl-1">                        </span><span class="hl-5">// Luego, enviar los datos de la solicitud</span><br/><span class="hl-1">                        </span><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-7">write</span><span class="hl-1">(</span><span class="hl-2">requestData</span><span class="hl-1">);</span><br/><span class="hl-1">                    } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">                        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">error</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-7">red</span><span class="hl-1">(</span><span class="hl-3">&#39;No se encontró ninguna carta con el ID especificado.&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">                    }</span><br/><span class="hl-1">                } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">error</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-7">red</span><span class="hl-1">(</span><span class="hl-3">&#39;No se encontró ningún usuario con el nombre especificado.&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">                }</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">        )</span><br/><span class="hl-1">        .</span><span class="hl-7">command</span><span class="hl-1">(</span><br/><span class="hl-1">            </span><span class="hl-3">&#39;show&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-3">&#39;Shows information of a specific card in the collection&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            {</span><br/><span class="hl-1">                </span><span class="hl-2">user:</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&#39;User name&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">                },</span><br/><span class="hl-1">                </span><span class="hl-2">id:</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&#39;Card ID&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;number&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><br/><span class="hl-1">                }</span><br/><span class="hl-1">            },</span><br/><span class="hl-1">            (</span><span class="hl-2">argv</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">userId</span><span class="hl-1"> = </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">user</span><span class="hl-1">;</span><br/><span class="hl-1">                </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">cardId</span><span class="hl-1"> = </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">id</span><span class="hl-1">;</span><br/><br/><span class="hl-1">                </span><span class="hl-5">// Buscar el usuario en userCardsMap</span><br/><span class="hl-1">                </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">userCards</span><span class="hl-1"> = </span><span class="hl-2">userCardsMap</span><span class="hl-1">.</span><span class="hl-7">get</span><span class="hl-1">(</span><span class="hl-2">userId</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><br/><span class="hl-1">                </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">userCards</span><span class="hl-1">) {</span><br/><span class="hl-1">                    </span><span class="hl-5">// Buscar la carta por su ID</span><br/><span class="hl-1">                    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">cardToDelete</span><span class="hl-1"> = </span><span class="hl-2">userCards</span><span class="hl-1">.</span><span class="hl-7">find</span><span class="hl-1">(</span><span class="hl-2">card</span><span class="hl-1"> </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-2">card</span><span class="hl-1">.</span><span class="hl-2">id</span><span class="hl-1"> === </span><span class="hl-2">cardId</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><br/><span class="hl-1">                    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">cardToDelete</span><span class="hl-1">) {</span><br/><span class="hl-1">                        </span><span class="hl-5">// Construir la solicitud a enviar al servidor</span><br/><span class="hl-1">                        </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">request</span><span class="hl-1"> = {</span><br/><span class="hl-1">                            </span><span class="hl-2">userId:</span><span class="hl-1"> </span><span class="hl-2">userId</span><span class="hl-1">,</span><br/><span class="hl-1">                            </span><span class="hl-2">action:</span><span class="hl-1"> </span><span class="hl-3">&#39;show&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                            </span><span class="hl-2">cardId:</span><span class="hl-1"> </span><span class="hl-2">cardId</span><br/><span class="hl-1">                        };</span><br/><span class="hl-1">    </span><br/><span class="hl-1">                        </span><span class="hl-5">// Convertir la solicitud a una cadena JSON</span><br/><span class="hl-1">                        </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">requestData</span><span class="hl-1"> = </span><span class="hl-8">JSON</span><span class="hl-1">.</span><span class="hl-7">stringify</span><span class="hl-1">(</span><span class="hl-2">request</span><span class="hl-1">);</span><br/><span class="hl-1">                        </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">requestDataLength</span><span class="hl-1"> = </span><span class="hl-2">Buffer</span><span class="hl-1">.</span><span class="hl-7">byteLength</span><span class="hl-1">(</span><span class="hl-2">requestData</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><br/><span class="hl-1">                        </span><span class="hl-5">// Enviar la longitud de los datos de la solicitud primero</span><br/><span class="hl-1">                        </span><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-7">write</span><span class="hl-1">(</span><span class="hl-2">Buffer</span><span class="hl-1">.</span><span class="hl-7">from</span><span class="hl-1">(</span><span class="hl-2">requestDataLength</span><span class="hl-1">.</span><span class="hl-7">toString</span><span class="hl-1">()));</span><br/><span class="hl-1">    </span><br/><span class="hl-1">                        </span><span class="hl-5">// Luego, enviar los datos de la solicitud</span><br/><span class="hl-1">                        </span><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-7">write</span><span class="hl-1">(</span><span class="hl-2">requestData</span><span class="hl-1">);</span><br/><span class="hl-1">                    } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">                        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">error</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-7">red</span><span class="hl-1">(</span><span class="hl-3">&#39;No se encontró ninguna carta con el ID especificado.&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">                    }</span><br/><span class="hl-1">                } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">error</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-7">red</span><span class="hl-1">(</span><span class="hl-3">&#39;No se encontró ningún usuario con el nombre especificado.&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">                }</span><br/><span class="hl-1">        </span><br/><span class="hl-1">            }</span><br/><span class="hl-1">        )</span><br/><span class="hl-1">        .</span><span class="hl-7">command</span><span class="hl-1">(</span><br/><span class="hl-1">            </span><span class="hl-3">&#39;list&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-3">&#39;List all cards in the collection&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            {</span><br/><span class="hl-1">                </span><span class="hl-2">user:</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&#39;User name&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">                }</span><br/><span class="hl-1">            },</span><br/><span class="hl-1">            (</span><span class="hl-2">argv</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-4">const</span><span class="hl-1"> { </span><span class="hl-8">user</span><span class="hl-1"> } = </span><span class="hl-2">argv</span><span class="hl-1">;</span><br/><span class="hl-1">                </span><span class="hl-5">// Buscar el usuario en userCardsMap</span><br/><span class="hl-1">                </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">userCards</span><span class="hl-1"> = </span><span class="hl-2">userCardsMap</span><span class="hl-1">.</span><span class="hl-7">get</span><span class="hl-1">(</span><span class="hl-2">user</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><br/><span class="hl-1">                </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">userCards</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><br/><span class="hl-1">                        </span><span class="hl-5">// Construir la solicitud a enviar al servidor</span><br/><span class="hl-1">                        </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">request</span><span class="hl-1"> = {</span><br/><span class="hl-1">                            </span><span class="hl-2">userId:</span><span class="hl-1"> </span><span class="hl-2">user</span><span class="hl-1">,</span><br/><span class="hl-1">                            </span><span class="hl-2">action:</span><span class="hl-1"> </span><span class="hl-3">&#39;list&#39;</span><br/><span class="hl-1">                        };</span><br/><span class="hl-1">    </span><br/><span class="hl-1">                        </span><span class="hl-5">// Convertir la solicitud a una cadena JSON</span><br/><span class="hl-1">                        </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">requestData</span><span class="hl-1"> = </span><span class="hl-8">JSON</span><span class="hl-1">.</span><span class="hl-7">stringify</span><span class="hl-1">(</span><span class="hl-2">request</span><span class="hl-1">);</span><br/><span class="hl-1">                        </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">requestDataLength</span><span class="hl-1"> = </span><span class="hl-2">Buffer</span><span class="hl-1">.</span><span class="hl-7">byteLength</span><span class="hl-1">(</span><span class="hl-2">requestData</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><br/><span class="hl-1">                        </span><span class="hl-5">// Enviar la longitud de los datos de la solicitud primero</span><br/><span class="hl-1">                        </span><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-7">write</span><span class="hl-1">(</span><span class="hl-2">Buffer</span><span class="hl-1">.</span><span class="hl-7">from</span><span class="hl-1">(</span><span class="hl-2">requestDataLength</span><span class="hl-1">.</span><span class="hl-7">toString</span><span class="hl-1">()));</span><br/><span class="hl-1">    </span><br/><span class="hl-1">                        </span><span class="hl-5">// Luego, enviar los datos de la solicitud</span><br/><span class="hl-1">                        </span><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-7">write</span><span class="hl-1">(</span><span class="hl-2">requestData</span><span class="hl-1">);</span><br/><span class="hl-1">                } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">error</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-7">red</span><span class="hl-1">(</span><span class="hl-3">&#39;No se encontró ningún usuario con el nombre especificado.&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">                }</span><br/><span class="hl-1">            </span><br/><span class="hl-1">            }</span><br/><span class="hl-1">        )</span><br/><span class="hl-1">        .</span><span class="hl-2">argv</span><span class="hl-1">;</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-2">responseData</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1"> = </span><span class="hl-3">&#39;&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-7">on</span><span class="hl-1">(</span><span class="hl-3">&#39;data&#39;</span><span class="hl-1">, (</span><span class="hl-2">data</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><br/><span class="hl-1">        </span><span class="hl-5">// Concatenar los datos de respuesta</span><br/><span class="hl-1">        </span><span class="hl-2">responseData</span><span class="hl-1"> += </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-7">toString</span><span class="hl-1">();</span><br/><br/><span class="hl-1">            </span><span class="hl-5">// Analizar la respuesta del servidor</span><br/><span class="hl-1">            </span><span class="hl-0">try</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">response</span><span class="hl-1"> = </span><span class="hl-8">JSON</span><span class="hl-1">.</span><span class="hl-7">parse</span><span class="hl-1">(</span><span class="hl-2">responseData</span><span class="hl-1">);</span><br/><br/><span class="hl-1">                </span><span class="hl-5">// Verificar el estado de la respuesta y mostrarla con Chalk</span><br/><span class="hl-1">                </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">response</span><span class="hl-1">.</span><span class="hl-2">status</span><span class="hl-1"> === </span><span class="hl-3">&#39;OK&#39;</span><span class="hl-1">) {</span><br/><span class="hl-1">                    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-7">green</span><span class="hl-1">(</span><span class="hl-3">&#39;Respuesta del servidor:&#39;</span><span class="hl-1">, </span><span class="hl-2">response</span><span class="hl-1">.</span><span class="hl-2">message</span><span class="hl-1">));</span><br/><span class="hl-1">                } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">error</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-7">red</span><span class="hl-1">(</span><span class="hl-3">&#39;Error del servidor:&#39;</span><span class="hl-1">, </span><span class="hl-2">response</span><span class="hl-1">.</span><span class="hl-2">message</span><span class="hl-1">));</span><br/><span class="hl-1">                }</span><br/><span class="hl-1">            } </span><span class="hl-0">catch</span><span class="hl-1"> (</span><span class="hl-2">error</span><span class="hl-1">) {</span><br/><span class="hl-1">                </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">error</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-7">red</span><span class="hl-1">(</span><span class="hl-3">&#39;Error al analizar la respuesta del servidor:&#39;</span><span class="hl-1">, </span><span class="hl-2">error</span><span class="hl-1">));</span><br/><span class="hl-1">            }</span><br/><br/><span class="hl-1">            </span><span class="hl-5">// Cerrar la conexión después de recibir la respuesta</span><br/><span class="hl-1">            </span><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-7">end</span><span class="hl-1">();</span><br/><span class="hl-1"> </span><br/><span class="hl-1">});</span><br/><br/><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-7">on</span><span class="hl-1">(</span><span class="hl-3">&#39;close&#39;</span><span class="hl-1">, () </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-3">&#39;Conexión cerrada&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">});</span>
</code><button>Copy</button></pre>
<a id="md:serverts" class="tsd-anchor"></a><h3><a href="#md:serverts"><a href="https://github.com/ULL-ESIT-INF-DSI-2324/ull-esit-inf-dsi-23-24-prct10-fs-proc-sockets-magic-app-IdairaReina/blob/main/src/cliente-servidor/server.ts">server.ts</a></a></h3><p>Este archivo contiene la implementación del servidor de la aplicación, que recibe las solicitudes del cliente, procesa los datos y devuelve las respuestas correspondientes.</p>
<p><strong>Contenido:</strong>
Configuración del servidor para escuchar conexiones de clientes.
Manejo de solicitudes del cliente, incluyendo agregar, eliminar, modificar, listar y mostrar cartas.
Lógica para procesar las solicitudes del cliente y comunicarse con el FileManager.</p>
<p><strong>Métodos principales:</strong>
Lógica para agregar, eliminar, modificar, listar y mostrar cartas según las solicitudes del cliente.
FileManager se utiliza para realizar operaciones en los datos de las cartas.</p>
<p>El código correspondiente a esta parte:</p>
<pre><code class="language-ts"><span class="hl-0">import</span><span class="hl-1"> </span><span class="hl-4">*</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-2">net</span><span class="hl-1"> </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;net&#39;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> </span><span class="hl-2">fs</span><span class="hl-1"> </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;fs&#39;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">Card</span><span class="hl-1">, </span><span class="hl-2">CardData</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;./card.js&#39;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> </span><span class="hl-4">*</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-2">path</span><span class="hl-1"> </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;path&#39;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> {</span><span class="hl-2">FileManager</span><span class="hl-1">} </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;./filemanager.js&#39;</span><span class="hl-1">;</span><br/><br/><br/><span class="hl-5">// Directorio base para los datos de los usuarios</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">userDataDirectory</span><span class="hl-1"> = </span><span class="hl-3">&#39;users&#39;</span><span class="hl-1">;</span><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">userCardsMap</span><span class="hl-1">: </span><span class="hl-6">Map</span><span class="hl-1">&lt;</span><span class="hl-6">string</span><span class="hl-1">, </span><span class="hl-6">Card</span><span class="hl-1">[]&gt; = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-7">Map</span><span class="hl-1">();</span><br/><br/><br/><span class="hl-5">// Función para cargar todas las cartas de un usuario existente</span><br/><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-4">function</span><span class="hl-1"> </span><span class="hl-7">loadAllUserCards</span><span class="hl-1">(): </span><span class="hl-6">Promise</span><span class="hl-1">&lt;</span><span class="hl-6">void</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">    </span><span class="hl-0">try</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">userDirectories</span><span class="hl-1"> = </span><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-2">promises</span><span class="hl-1">.</span><span class="hl-7">readdir</span><span class="hl-1">(</span><span class="hl-2">userDataDirectory</span><span class="hl-1">);</span><br/><br/><span class="hl-1">        </span><span class="hl-0">for</span><span class="hl-1"> (</span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">userId</span><span class="hl-1"> </span><span class="hl-4">of</span><span class="hl-1"> </span><span class="hl-2">userDirectories</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">userDir</span><span class="hl-1"> = </span><span class="hl-2">path</span><span class="hl-1">.</span><span class="hl-7">join</span><span class="hl-1">(</span><span class="hl-2">userDataDirectory</span><span class="hl-1">, </span><span class="hl-2">userId</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">userFiles</span><span class="hl-1"> = </span><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-2">promises</span><span class="hl-1">.</span><span class="hl-7">readdir</span><span class="hl-1">(</span><span class="hl-2">userDir</span><span class="hl-1">);</span><br/><br/><span class="hl-1">            </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">cards</span><span class="hl-1">: </span><span class="hl-6">Card</span><span class="hl-1">[] = [];</span><br/><br/><span class="hl-1">            </span><span class="hl-0">for</span><span class="hl-1"> (</span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">userFile</span><span class="hl-1"> </span><span class="hl-4">of</span><span class="hl-1"> </span><span class="hl-2">userFiles</span><span class="hl-1">) {</span><br/><span class="hl-1">                </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">filePath</span><span class="hl-1"> = </span><span class="hl-2">path</span><span class="hl-1">.</span><span class="hl-7">join</span><span class="hl-1">(</span><span class="hl-2">userDir</span><span class="hl-1">, </span><span class="hl-2">userFile</span><span class="hl-1">);</span><br/><span class="hl-1">                </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">cardData</span><span class="hl-1"> = </span><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-7">loadCardFromFileAsync</span><span class="hl-1">(</span><span class="hl-2">filePath</span><span class="hl-1">);</span><br/><span class="hl-1">                </span><span class="hl-2">cards</span><span class="hl-1">.</span><span class="hl-7">push</span><span class="hl-1">(</span><span class="hl-2">cardData</span><span class="hl-1">);</span><br/><span class="hl-1">            }</span><br/><br/><span class="hl-1">            </span><span class="hl-2">userCardsMap</span><span class="hl-1">.</span><span class="hl-7">set</span><span class="hl-1">(</span><span class="hl-2">userId</span><span class="hl-1">, </span><span class="hl-2">cards</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-3">`Cartas de usuario &#39;</span><span class="hl-4">${</span><span class="hl-2">userId</span><span class="hl-4">}</span><span class="hl-3">&#39; cargadas correctamente.`</span><span class="hl-1">);</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    } </span><span class="hl-0">catch</span><span class="hl-1"> (</span><span class="hl-2">error</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">error</span><span class="hl-1">(</span><span class="hl-3">&#39;Error al cargar las cartas de usuario:&#39;</span><span class="hl-1">, </span><span class="hl-2">error</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-5">// Llamar a la función para cargar las cartas de todos los usuarios existentes al iniciar el servidor</span><br/><span class="hl-7">loadAllUserCards</span><span class="hl-1">()</span><br/><span class="hl-1">    .</span><span class="hl-7">then</span><span class="hl-1">(() </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-3">&#39;Todas las cartas de usuario cargadas correctamente.&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">    .</span><span class="hl-7">catch</span><span class="hl-1">(</span><span class="hl-2">error</span><span class="hl-1"> </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">error</span><span class="hl-1">(</span><span class="hl-3">&#39;Error al cargar las cartas de usuario:&#39;</span><span class="hl-1">, </span><span class="hl-2">error</span><span class="hl-1">);</span><br/><span class="hl-1">    });</span><br/><br/><span class="hl-5">// Función para cargar una carta desde un archivo JSON de manera asíncrona</span><br/><span class="hl-4">function</span><span class="hl-1"> </span><span class="hl-7">loadCardFromFileAsync</span><span class="hl-1">(</span><span class="hl-2">filePath</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1">): </span><span class="hl-6">Promise</span><span class="hl-1">&lt;</span><span class="hl-6">Card</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">Promise</span><span class="hl-1">((</span><span class="hl-2">resolve</span><span class="hl-1">, </span><span class="hl-2">reject</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-7">readFile</span><span class="hl-1">(</span><span class="hl-2">filePath</span><span class="hl-1">, </span><span class="hl-3">&#39;utf-8&#39;</span><span class="hl-1">, (</span><span class="hl-2">err</span><span class="hl-1">, </span><span class="hl-2">data</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">err</span><span class="hl-1">) {</span><br/><span class="hl-1">                </span><span class="hl-7">reject</span><span class="hl-1">(</span><span class="hl-2">err</span><span class="hl-1">);</span><br/><span class="hl-1">            } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">cardData</span><span class="hl-1">: </span><span class="hl-6">CardData</span><span class="hl-1"> = </span><span class="hl-8">JSON</span><span class="hl-1">.</span><span class="hl-7">parse</span><span class="hl-1">(</span><span class="hl-2">data</span><span class="hl-1">);</span><br/><span class="hl-1">                </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">card</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-7">Card</span><span class="hl-1">(</span><span class="hl-2">cardData</span><span class="hl-1">);</span><br/><span class="hl-1">                </span><span class="hl-7">resolve</span><span class="hl-1">(</span><span class="hl-2">card</span><span class="hl-1">);</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">        });</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">}</span><br/><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">server</span><span class="hl-1"> = </span><span class="hl-2">net</span><span class="hl-1">.</span><span class="hl-7">createServer</span><span class="hl-1">((</span><span class="hl-2">socket</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-3">&#39;Cliente conectado&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-1">    </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-2">requestDataLength</span><span class="hl-1">: </span><span class="hl-6">number</span><span class="hl-1"> | </span><span class="hl-6">null</span><span class="hl-1"> = </span><span class="hl-4">null</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-2">requestData</span><span class="hl-1"> = </span><span class="hl-3">&#39;&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">fileManager</span><span class="hl-1"> = </span><span class="hl-2">FileManager</span><span class="hl-1">.</span><span class="hl-7">getInstance</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><br/><br/><span class="hl-1">    </span><span class="hl-5">// Manejar datos recibidos del cliente</span><br/><span class="hl-1">    </span><span class="hl-2">socket</span><span class="hl-1">.</span><span class="hl-7">on</span><span class="hl-1">(</span><span class="hl-3">&#39;data&#39;</span><span class="hl-1">, </span><span class="hl-4">async</span><span class="hl-1"> (</span><span class="hl-2">data</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">requestDataLength</span><span class="hl-1"> === </span><span class="hl-4">null</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-5">// Si aún no hemos recibido la longitud de los datos de la solicitud</span><br/><span class="hl-1">            </span><span class="hl-2">requestDataLength</span><span class="hl-1"> = </span><span class="hl-7">parseInt</span><span class="hl-1">(</span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-7">toString</span><span class="hl-1">());</span><br/><br/><span class="hl-1">        } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-5">// Concatenar los datos de la solicitud</span><br/><span class="hl-1">            </span><span class="hl-2">requestData</span><span class="hl-1"> += </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-7">toString</span><span class="hl-1">();</span><br/><br/><span class="hl-1">                </span><span class="hl-5">// Analizar la solicitud del cliente</span><br/><span class="hl-1">                </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">request</span><span class="hl-1"> = </span><span class="hl-8">JSON</span><span class="hl-1">.</span><span class="hl-7">parse</span><span class="hl-1">(</span><span class="hl-2">requestData</span><span class="hl-1">);</span><br/><br/><span class="hl-1">                </span><span class="hl-4">const</span><span class="hl-1"> { </span><span class="hl-8">cardData</span><span class="hl-1"> } = </span><span class="hl-2">request</span><span class="hl-1">;</span><br/><br/><span class="hl-1">                </span><span class="hl-5">// Manejar la solicitud y enviar respuesta al cliente</span><br/><span class="hl-1">                </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">userId</span><span class="hl-1"> = </span><span class="hl-2">request</span><span class="hl-1">.</span><span class="hl-2">userId</span><span class="hl-1">;</span><br/><span class="hl-1">                </span><br/><span class="hl-1">                </span><span class="hl-0">try</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-0">switch</span><span class="hl-1"> (</span><span class="hl-2">request</span><span class="hl-1">.</span><span class="hl-2">action</span><span class="hl-1">) {</span><br/><span class="hl-1">                        </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-3">&#39;add&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">                           </span><span class="hl-5">// Añadir la carta al sistema de archivos</span><br/><span class="hl-1">                        </span><span class="hl-2">fileManager</span><span class="hl-1">.</span><span class="hl-7">addCard</span><span class="hl-1">(</span><span class="hl-2">userId</span><span class="hl-1">, </span><span class="hl-2">cardData</span><span class="hl-1">, (</span><span class="hl-2">error</span><span class="hl-1">, </span><span class="hl-2">result</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">                         </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">error</span><span class="hl-1">) {</span><br/><span class="hl-1">                         </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">error</span><span class="hl-1">(</span><span class="hl-3">&#39;Error al añadir la carta:&#39;</span><span class="hl-1">, </span><span class="hl-2">error</span><span class="hl-1">);</span><br/><span class="hl-1">                         </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">responseError</span><span class="hl-1"> = { </span><span class="hl-2">status:</span><span class="hl-1"> </span><span class="hl-3">&#39;Error&#39;</span><span class="hl-1">, </span><span class="hl-2">message:</span><span class="hl-1"> </span><span class="hl-2">error</span><span class="hl-1"> };</span><br/><span class="hl-1">                         </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">responseDataError</span><span class="hl-1"> = </span><span class="hl-8">JSON</span><span class="hl-1">.</span><span class="hl-7">stringify</span><span class="hl-1">(</span><span class="hl-2">responseError</span><span class="hl-1">);</span><br/><span class="hl-1">                         </span><span class="hl-2">socket</span><span class="hl-1">.</span><span class="hl-7">write</span><span class="hl-1">(</span><span class="hl-2">responseDataError</span><span class="hl-1">);</span><br/><span class="hl-1">                         } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">                             </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-3">&#39;Carta añadida correctamente:&#39;</span><span class="hl-1">, </span><span class="hl-2">result</span><span class="hl-1">);</span><br/><span class="hl-1">                             </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">responseAdd</span><span class="hl-1"> = { </span><span class="hl-2">status:</span><span class="hl-1"> </span><span class="hl-3">&#39;OK&#39;</span><span class="hl-1">, </span><span class="hl-2">message:</span><span class="hl-1"> </span><span class="hl-3">&#39;Carta añadida correctamente&#39;</span><span class="hl-1"> };</span><br/><span class="hl-1">                             </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">responseDataAdd</span><span class="hl-1"> = </span><span class="hl-8">JSON</span><span class="hl-1">.</span><span class="hl-7">stringify</span><span class="hl-1">(</span><span class="hl-2">responseAdd</span><span class="hl-1">);</span><br/><span class="hl-1">                             </span><span class="hl-2">socket</span><span class="hl-1">.</span><span class="hl-7">write</span><span class="hl-1">(</span><span class="hl-2">responseDataAdd</span><span class="hl-1">);</span><br/><span class="hl-1">                             </span><span class="hl-5">// Cerrar el lado cliente del socket después de enviar la respuesta</span><br/><span class="hl-1">                             </span><span class="hl-2">socket</span><span class="hl-1">.</span><span class="hl-7">end</span><span class="hl-1">();</span><br/><span class="hl-1">                            }</span><br/><span class="hl-1">                        });</span><br/><span class="hl-1">                            </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">                        </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-3">&#39;modify&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">                            </span><span class="hl-2">fileManager</span><span class="hl-1">.</span><span class="hl-7">modifyCard</span><span class="hl-1">(</span><span class="hl-2">userId</span><span class="hl-1">, </span><span class="hl-2">request</span><span class="hl-1">.</span><span class="hl-2">cardId</span><span class="hl-1">, </span><span class="hl-2">request</span><span class="hl-1">.</span><span class="hl-2">modifiedData</span><span class="hl-1">, (</span><span class="hl-2">error</span><span class="hl-1">, </span><span class="hl-2">result</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">                                </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">error</span><span class="hl-1">) {</span><br/><span class="hl-1">                                    </span><span class="hl-5">// Si hay un error, registrar y enviar respuesta de error al cliente</span><br/><span class="hl-1">                                    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">error</span><span class="hl-1">(</span><span class="hl-3">&#39;Error al modificar la carta:&#39;</span><span class="hl-1">, </span><span class="hl-2">error</span><span class="hl-1">);</span><br/><span class="hl-1">                                    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">responseError</span><span class="hl-1"> = { </span><span class="hl-2">status:</span><span class="hl-1"> </span><span class="hl-3">&#39;Error&#39;</span><span class="hl-1">, </span><span class="hl-2">message:</span><span class="hl-1"> </span><span class="hl-2">error</span><span class="hl-1"> };</span><br/><span class="hl-1">                                    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">responseDataError</span><span class="hl-1"> = </span><span class="hl-8">JSON</span><span class="hl-1">.</span><span class="hl-7">stringify</span><span class="hl-1">(</span><span class="hl-2">responseError</span><span class="hl-1">);</span><br/><span class="hl-1">                                    </span><span class="hl-2">socket</span><span class="hl-1">.</span><span class="hl-7">write</span><span class="hl-1">(</span><span class="hl-2">responseDataError</span><span class="hl-1">);</span><br/><span class="hl-1">                                } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">                                    </span><span class="hl-5">// Si se modificó correctamente, registrar y enviar respuesta de éxito al cliente</span><br/><span class="hl-1">                                    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-3">&#39;Carta modificada correctamente:&#39;</span><span class="hl-1">, </span><span class="hl-2">result</span><span class="hl-1">);</span><br/><span class="hl-1">                                    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">responseSuccess</span><span class="hl-1"> = { </span><span class="hl-2">status:</span><span class="hl-1"> </span><span class="hl-3">&#39;OK&#39;</span><span class="hl-1">, </span><span class="hl-2">message:</span><span class="hl-1"> </span><span class="hl-2">result</span><span class="hl-1"> };</span><br/><span class="hl-1">                                    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">responseDataSuccess</span><span class="hl-1"> = </span><span class="hl-8">JSON</span><span class="hl-1">.</span><span class="hl-7">stringify</span><span class="hl-1">(</span><span class="hl-2">responseSuccess</span><span class="hl-1">);</span><br/><span class="hl-1">                                    </span><span class="hl-2">socket</span><span class="hl-1">.</span><span class="hl-7">write</span><span class="hl-1">(</span><span class="hl-2">responseDataSuccess</span><span class="hl-1">);</span><br/><span class="hl-1">                                }</span><br/><span class="hl-1">                            });</span><br/><span class="hl-1">                            </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">                        </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-3">&#39;delete&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">                            </span><span class="hl-5">// Llamada a la función deleteCard del FileManager</span><br/><span class="hl-1">                        </span><span class="hl-2">fileManager</span><span class="hl-1">.</span><span class="hl-7">deleteCard</span><span class="hl-1">(</span><span class="hl-2">userId</span><span class="hl-1">, </span><span class="hl-2">request</span><span class="hl-1">.</span><span class="hl-2">cardData</span><span class="hl-1">.</span><span class="hl-2">id</span><span class="hl-1">, (</span><span class="hl-2">error</span><span class="hl-1">, </span><span class="hl-2">result</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">                          </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">error</span><span class="hl-1">) {</span><br/><span class="hl-1">                         </span><span class="hl-5">// Si hay un error, registrar y enviar respuesta de error al cliente</span><br/><span class="hl-1">                         </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">error</span><span class="hl-1">(</span><span class="hl-3">&#39;Error al eliminar la carta:&#39;</span><span class="hl-1">, </span><span class="hl-2">error</span><span class="hl-1">);</span><br/><span class="hl-1">                         </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">responseError</span><span class="hl-1"> = { </span><span class="hl-2">status:</span><span class="hl-1"> </span><span class="hl-3">&#39;Error&#39;</span><span class="hl-1">, </span><span class="hl-2">message:</span><span class="hl-1"> </span><span class="hl-2">error</span><span class="hl-1"> };</span><br/><span class="hl-1">                         </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">responseDataError</span><span class="hl-1"> = </span><span class="hl-8">JSON</span><span class="hl-1">.</span><span class="hl-7">stringify</span><span class="hl-1">(</span><span class="hl-2">responseError</span><span class="hl-1">);</span><br/><span class="hl-1">                         </span><span class="hl-2">socket</span><span class="hl-1">.</span><span class="hl-7">write</span><span class="hl-1">(</span><span class="hl-2">responseDataError</span><span class="hl-1">);</span><br/><span class="hl-1">                         } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">                           </span><span class="hl-5">// Si se eliminó correctamente, registrar y enviar respuesta de éxito al cliente</span><br/><span class="hl-1">                           </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-3">&#39;Carta eliminada correctamente:&#39;</span><span class="hl-1">, </span><span class="hl-2">result</span><span class="hl-1">);</span><br/><span class="hl-1">                           </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">responseSuccess</span><span class="hl-1"> = { </span><span class="hl-2">status:</span><span class="hl-1"> </span><span class="hl-3">&#39;OK&#39;</span><span class="hl-1">, </span><span class="hl-2">message:</span><span class="hl-1"> </span><span class="hl-2">result</span><span class="hl-1"> };</span><br/><span class="hl-1">                           </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">responseDataSuccess</span><span class="hl-1"> = </span><span class="hl-8">JSON</span><span class="hl-1">.</span><span class="hl-7">stringify</span><span class="hl-1">(</span><span class="hl-2">responseSuccess</span><span class="hl-1">);</span><br/><span class="hl-1">                           </span><span class="hl-2">socket</span><span class="hl-1">.</span><span class="hl-7">write</span><span class="hl-1">(</span><span class="hl-2">responseDataSuccess</span><span class="hl-1">);</span><br/><span class="hl-1">                           </span><span class="hl-2">socket</span><span class="hl-1">.</span><span class="hl-7">end</span><span class="hl-1">();</span><br/><span class="hl-1">                         }</span><br/><span class="hl-1">                        });</span><br/><span class="hl-1">                            </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">                        </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-3">&#39;list&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">                            </span><span class="hl-2">fileManager</span><span class="hl-1">.</span><span class="hl-7">listCard</span><span class="hl-1">(</span><span class="hl-2">userId</span><span class="hl-1">, (</span><span class="hl-2">error</span><span class="hl-1">, </span><span class="hl-2">result</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">                                </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">error</span><span class="hl-1">) {</span><br/><span class="hl-1">                                    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">responseError</span><span class="hl-1"> = { </span><span class="hl-2">status:</span><span class="hl-1"> </span><span class="hl-3">&#39;Error&#39;</span><span class="hl-1">, </span><span class="hl-2">message:</span><span class="hl-1"> </span><span class="hl-2">error</span><span class="hl-1"> };</span><br/><span class="hl-1">                                    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">responseDataError</span><span class="hl-1"> = </span><span class="hl-8">JSON</span><span class="hl-1">.</span><span class="hl-7">stringify</span><span class="hl-1">(</span><span class="hl-2">responseError</span><span class="hl-1">);</span><br/><span class="hl-1">                                    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">responseDataLengthError</span><span class="hl-1"> = </span><span class="hl-2">Buffer</span><span class="hl-1">.</span><span class="hl-7">byteLength</span><span class="hl-1">(</span><span class="hl-2">responseDataError</span><span class="hl-1">);</span><br/><span class="hl-1">                                    </span><span class="hl-2">socket</span><span class="hl-1">.</span><span class="hl-7">write</span><span class="hl-1">(</span><span class="hl-2">Buffer</span><span class="hl-1">.</span><span class="hl-7">from</span><span class="hl-1">(</span><span class="hl-2">responseDataLengthError</span><span class="hl-1">.</span><span class="hl-7">toString</span><span class="hl-1">()));</span><br/><span class="hl-1">                                    </span><span class="hl-2">socket</span><span class="hl-1">.</span><span class="hl-7">write</span><span class="hl-1">(</span><span class="hl-2">responseDataError</span><span class="hl-1">);</span><br/><span class="hl-1">                                } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">                                    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">responseSuccess</span><span class="hl-1"> = { </span><span class="hl-2">status:</span><span class="hl-1"> </span><span class="hl-3">&#39;OK&#39;</span><span class="hl-1">, </span><span class="hl-2">message:</span><span class="hl-1"> </span><span class="hl-2">result</span><span class="hl-1"> };</span><br/><span class="hl-1">                                    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">responseDataSuccess</span><span class="hl-1"> = </span><span class="hl-8">JSON</span><span class="hl-1">.</span><span class="hl-7">stringify</span><span class="hl-1">(</span><span class="hl-2">responseSuccess</span><span class="hl-1">);</span><br/><span class="hl-1">                                    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">responseDataLengthSuccess</span><span class="hl-1"> = </span><span class="hl-2">Buffer</span><span class="hl-1">.</span><span class="hl-7">byteLength</span><span class="hl-1">(</span><span class="hl-2">responseDataSuccess</span><span class="hl-1">);</span><br/><span class="hl-1">                                    </span><span class="hl-2">socket</span><span class="hl-1">.</span><span class="hl-7">write</span><span class="hl-1">(</span><span class="hl-2">Buffer</span><span class="hl-1">.</span><span class="hl-7">from</span><span class="hl-1">(</span><span class="hl-2">responseDataLengthSuccess</span><span class="hl-1">.</span><span class="hl-7">toString</span><span class="hl-1">()));</span><br/><span class="hl-1">                                    </span><span class="hl-2">socket</span><span class="hl-1">.</span><span class="hl-7">write</span><span class="hl-1">(</span><span class="hl-2">responseDataSuccess</span><span class="hl-1">);</span><br/><span class="hl-1">                                }</span><br/><span class="hl-1">                            });</span><br/><span class="hl-1">                            </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">                        </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-3">&#39;show&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">                            </span><span class="hl-2">fileManager</span><span class="hl-1">.</span><span class="hl-7">showCard</span><span class="hl-1">(</span><span class="hl-2">userId</span><span class="hl-1">, </span><span class="hl-2">request</span><span class="hl-1">.</span><span class="hl-2">cardId</span><span class="hl-1">, (</span><span class="hl-2">error</span><span class="hl-1">, </span><span class="hl-2">result</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">                                </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">error</span><span class="hl-1">) {</span><br/><span class="hl-1">                                    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">error</span><span class="hl-1">(</span><span class="hl-3">&#39;Error:&#39;</span><span class="hl-1">, </span><span class="hl-2">error</span><span class="hl-1">);</span><br/><span class="hl-1">                                    </span><span class="hl-5">// Enviar respuesta de error al cliente</span><br/><span class="hl-1">                                    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">responseError</span><span class="hl-1"> = { </span><span class="hl-2">status:</span><span class="hl-1"> </span><span class="hl-3">&#39;Error&#39;</span><span class="hl-1">, </span><span class="hl-2">message:</span><span class="hl-1"> </span><span class="hl-2">error</span><span class="hl-1"> };</span><br/><span class="hl-1">                                    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">responseDataError</span><span class="hl-1"> = </span><span class="hl-8">JSON</span><span class="hl-1">.</span><span class="hl-7">stringify</span><span class="hl-1">(</span><span class="hl-2">responseError</span><span class="hl-1">);</span><br/><span class="hl-1">                                    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">responseDataLengthError</span><span class="hl-1"> = </span><span class="hl-2">Buffer</span><span class="hl-1">.</span><span class="hl-7">byteLength</span><span class="hl-1">(</span><span class="hl-2">responseDataError</span><span class="hl-1">);</span><br/><span class="hl-1">                                    </span><span class="hl-2">socket</span><span class="hl-1">.</span><span class="hl-7">write</span><span class="hl-1">(</span><span class="hl-2">Buffer</span><span class="hl-1">.</span><span class="hl-7">from</span><span class="hl-1">(</span><span class="hl-2">responseDataLengthError</span><span class="hl-1">.</span><span class="hl-7">toString</span><span class="hl-1">()));</span><br/><span class="hl-1">                                    </span><span class="hl-2">socket</span><span class="hl-1">.</span><span class="hl-7">write</span><span class="hl-1">(</span><span class="hl-2">responseDataError</span><span class="hl-1">);</span><br/><span class="hl-1">                                } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">                                    </span><span class="hl-5">// Enviar respuesta con los datos de la carta al cliente</span><br/><span class="hl-1">                                    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">responseData</span><span class="hl-1"> = </span><span class="hl-8">JSON</span><span class="hl-1">.</span><span class="hl-7">stringify</span><span class="hl-1">(</span><span class="hl-2">result</span><span class="hl-1">);</span><br/><span class="hl-1">                                    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">responseDataLength</span><span class="hl-1"> = </span><span class="hl-2">Buffer</span><span class="hl-1">.</span><span class="hl-7">byteLength</span><span class="hl-1">(</span><span class="hl-2">responseData</span><span class="hl-1">);</span><br/><span class="hl-1">                                    </span><span class="hl-2">socket</span><span class="hl-1">.</span><span class="hl-7">write</span><span class="hl-1">(</span><span class="hl-2">Buffer</span><span class="hl-1">.</span><span class="hl-7">from</span><span class="hl-1">(</span><span class="hl-2">responseDataLength</span><span class="hl-1">.</span><span class="hl-7">toString</span><span class="hl-1">()));</span><br/><span class="hl-1">                                    </span><span class="hl-2">socket</span><span class="hl-1">.</span><span class="hl-7">write</span><span class="hl-1">(</span><span class="hl-2">responseData</span><span class="hl-1">);</span><br/><span class="hl-1">                                }</span><br/><span class="hl-1">                            });</span><br/><span class="hl-1">                            </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">                        </span><span class="hl-0">default</span><span class="hl-1">:</span><br/><span class="hl-1">                            </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">error</span><span class="hl-1">(</span><span class="hl-3">&#39;Acción no válida&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">                    }</span><br/><span class="hl-1">                } </span><span class="hl-0">catch</span><span class="hl-1"> (</span><span class="hl-2">error</span><span class="hl-1">) {</span><br/><span class="hl-1">                    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">error</span><span class="hl-1">(</span><span class="hl-3">&#39;Error:&#39;</span><span class="hl-1">, </span><span class="hl-2">error</span><span class="hl-1">.</span><span class="hl-2">message</span><span class="hl-1">);</span><br/><span class="hl-1">                    </span><span class="hl-5">// Enviar respuesta de error al cliente</span><br/><span class="hl-1">                    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">responseError</span><span class="hl-1"> = { </span><span class="hl-2">status:</span><span class="hl-1"> </span><span class="hl-3">&#39;Error&#39;</span><span class="hl-1">, </span><span class="hl-2">message:</span><span class="hl-1"> </span><span class="hl-2">error</span><span class="hl-1">.</span><span class="hl-2">message</span><span class="hl-1"> };</span><br/><span class="hl-1">                    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">responseDataError</span><span class="hl-1"> = </span><span class="hl-8">JSON</span><span class="hl-1">.</span><span class="hl-7">stringify</span><span class="hl-1">(</span><span class="hl-2">responseError</span><span class="hl-1">);</span><br/><span class="hl-1">                    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">responseDataLengthError</span><span class="hl-1"> = </span><span class="hl-2">Buffer</span><span class="hl-1">.</span><span class="hl-7">byteLength</span><span class="hl-1">(</span><span class="hl-2">responseDataError</span><span class="hl-1">);</span><br/><span class="hl-1">                    </span><span class="hl-2">socket</span><span class="hl-1">.</span><span class="hl-7">write</span><span class="hl-1">(</span><span class="hl-2">Buffer</span><span class="hl-1">.</span><span class="hl-7">from</span><span class="hl-1">(</span><span class="hl-2">responseDataLengthError</span><span class="hl-1">.</span><span class="hl-7">toString</span><span class="hl-1">()));</span><br/><span class="hl-1">                    </span><span class="hl-2">socket</span><span class="hl-1">.</span><span class="hl-7">write</span><span class="hl-1">(</span><span class="hl-2">responseDataError</span><span class="hl-1">);</span><br/><span class="hl-1">                }</span><br/><br/><span class="hl-1">                </span><span class="hl-5">// Reiniciar variables para la próxima solicitud</span><br/><span class="hl-1">                </span><span class="hl-2">requestDataLength</span><span class="hl-1"> = </span><span class="hl-4">null</span><span class="hl-1">;</span><br/><span class="hl-1">                </span><span class="hl-2">requestData</span><span class="hl-1"> = </span><span class="hl-3">&#39;&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    });</span><br/><br/><span class="hl-1">    </span><span class="hl-5">// Manejar eventos de cierre de conexión</span><br/><span class="hl-1">    </span><span class="hl-2">socket</span><span class="hl-1">.</span><span class="hl-7">on</span><span class="hl-1">(</span><span class="hl-3">&#39;close&#39;</span><span class="hl-1">, () </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-3">&#39;Cliente desconectado&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">    });</span><br/><br/><span class="hl-1">    </span><span class="hl-5">// Manejar errores de conexión</span><br/><span class="hl-1">    </span><span class="hl-2">socket</span><span class="hl-1">.</span><span class="hl-7">on</span><span class="hl-1">(</span><span class="hl-3">&#39;error&#39;</span><span class="hl-1">, (</span><span class="hl-2">error</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">error</span><span class="hl-1">(</span><span class="hl-3">&#39;Error en la conexión:&#39;</span><span class="hl-1">, </span><span class="hl-2">error</span><span class="hl-1">);</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">// Escuchar en un puerto específico</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">PORT</span><span class="hl-1"> = </span><span class="hl-10">60300</span><span class="hl-1">;</span><br/><span class="hl-2">server</span><span class="hl-1">.</span><span class="hl-7">listen</span><span class="hl-1">(</span><span class="hl-8">PORT</span><span class="hl-1">, () </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-3">`Servidor escuchando en el puerto </span><span class="hl-4">${</span><span class="hl-8">PORT</span><span class="hl-4">}</span><span class="hl-3">`</span><span class="hl-1">);</span><br/><span class="hl-1">});</span>
</code><button>Copy</button></pre>
<a id="md:cardts" class="tsd-anchor"></a><h3><a href="#md:cardts"><a href="https://github.com/ULL-ESIT-INF-DSI-2324/ull-esit-inf-dsi-23-24-prct10-fs-proc-sockets-magic-app-IdairaReina/blob/main/src/cliente-servidor/card.ts">card.ts</a></a></h3><p>En este archivo se encuentra la implementación de la clase Card, que representa una carta del juego. La clase Card tiene métodos para acceder y manipular los datos de la carta, así como para serializar y deserializar la carta a/desde JSON.</p>
<p>Constructor: Al crear una instancia de Card, se especifican los datos de la carta.</p>
<p>Métodos Get: Proporcionan acceso a los diferentes atributos de la carta, como ID, nombre, costo de mana, etc.</p>
<p>Método setData: Actualiza los datos de la carta con los proporcionados.</p>
<p>Método toJSON: Serializa la carta a un objeto JSON.</p>
<p>Método estático fromJSON: Deserializa un objeto JSON en una instancia de Card.</p>
<pre><code class="language-ts"><span class="hl-5">/**</span><br/><span class="hl-5"> * Enumeración para los colores de las cartas.</span><br/><span class="hl-5"> */</span><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-4">enum</span><span class="hl-1"> </span><span class="hl-6">Color</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-8">Blanco</span><span class="hl-1"> = </span><span class="hl-3">&quot;blanco&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-8">Azul</span><span class="hl-1"> = </span><span class="hl-3">&quot;azul&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-8">Negro</span><span class="hl-1"> = </span><span class="hl-3">&quot;negro&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-8">Rojo</span><span class="hl-1"> = </span><span class="hl-3">&quot;rojo&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-8">Verde</span><span class="hl-1"> = </span><span class="hl-3">&quot;verde&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-8">Incoloro</span><span class="hl-1"> = </span><span class="hl-3">&quot;incoloro&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-8">Multicolor</span><span class="hl-1"> = </span><span class="hl-3">&quot;multicolor&quot;</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-5">/**</span><br/><span class="hl-5"> * Enumeración para los tipos de cartas.</span><br/><span class="hl-5"> */</span><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-4">enum</span><span class="hl-1"> </span><span class="hl-6">CardType</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-8">Tierra</span><span class="hl-1"> = </span><span class="hl-3">&quot;Tierra&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-8">Criatura</span><span class="hl-1"> = </span><span class="hl-3">&quot;Criatura&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-8">Encantamiento</span><span class="hl-1"> = </span><span class="hl-3">&quot;Encantamiento&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-8">Conjuro</span><span class="hl-1"> = </span><span class="hl-3">&quot;Conjuro&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-8">Instantaneo</span><span class="hl-1"> = </span><span class="hl-3">&quot;Instantáneo&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-8">Artefacto</span><span class="hl-1"> = </span><span class="hl-3">&quot;Artefacto&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-8">Planeswalker</span><span class="hl-1"> = </span><span class="hl-3">&quot;Planeswalker&quot;</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-5">/**</span><br/><span class="hl-5"> * Enumeración para las rarezas de las cartas.</span><br/><span class="hl-5"> */</span><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-4">enum</span><span class="hl-1"> </span><span class="hl-6">Rarity</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-8">Comun</span><span class="hl-1"> = </span><span class="hl-3">&quot;Común&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-8">Infrecuente</span><span class="hl-1"> = </span><span class="hl-3">&quot;Infrecuente&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-8">Rara</span><span class="hl-1"> = </span><span class="hl-3">&quot;Rara&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-8">Mítica</span><span class="hl-1"> = </span><span class="hl-3">&quot;Mítica&quot;</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-5">/**</span><br/><span class="hl-5"> * Interfaz que define la estructura de los datos de una carta.</span><br/><span class="hl-5"> */</span><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-4">interface</span><span class="hl-1"> </span><span class="hl-6">CardData</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">id</span><span class="hl-1">: </span><span class="hl-6">number</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-2">name</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-2">manaCost</span><span class="hl-1">: </span><span class="hl-6">number</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-2">color</span><span class="hl-1">: </span><span class="hl-6">Color</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-2">type</span><span class="hl-1">: </span><span class="hl-6">CardType</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-2">rarity</span><span class="hl-1">: </span><span class="hl-6">Rarity</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-2">rulesText</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-2">power</span><span class="hl-1">?: </span><span class="hl-6">number</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-2">toughness</span><span class="hl-1">?: </span><span class="hl-6">number</span><span class="hl-1">; </span><span class="hl-5">//resistencia</span><br/><span class="hl-1">    </span><span class="hl-2">loyalty</span><span class="hl-1">?: </span><span class="hl-6">number</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-2">marketValue</span><span class="hl-1">: </span><span class="hl-6">number</span><span class="hl-1">;</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-5">/**</span><br/><span class="hl-5"> * Clase que representa una carta.</span><br/><span class="hl-5"> */</span><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-6">Card</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-2">data</span><span class="hl-1">: </span><span class="hl-6">CardData</span><span class="hl-1">;</span><br/><br/><span class="hl-1">    </span><span class="hl-5">/**</span><br/><span class="hl-5">     * Crea una instancia de Card.</span><br/><span class="hl-5">     * </span><span class="hl-4">@param</span><span class="hl-5"> </span><span class="hl-2">data</span><span class="hl-5"> Los datos de la carta.</span><br/><span class="hl-5">     */</span><br/><span class="hl-1">    </span><span class="hl-4">constructor</span><span class="hl-1">(</span><span class="hl-2">data</span><span class="hl-1">: </span><span class="hl-6">CardData</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">data</span><span class="hl-1"> = </span><span class="hl-2">data</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-5">// Getters</span><br/><span class="hl-1">    </span><span class="hl-4">get</span><span class="hl-1"> </span><span class="hl-7">id</span><span class="hl-1">() {</span><br/><span class="hl-1">        </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">id</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-4">get</span><span class="hl-1"> </span><span class="hl-7">name</span><span class="hl-1">() {</span><br/><span class="hl-1">        </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">name</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-4">get</span><span class="hl-1"> </span><span class="hl-7">manaCost</span><span class="hl-1">() {</span><br/><span class="hl-1">        </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">manaCost</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-4">get</span><span class="hl-1"> </span><span class="hl-7">color</span><span class="hl-1">() {</span><br/><span class="hl-1">        </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">color</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-4">get</span><span class="hl-1"> </span><span class="hl-7">type</span><span class="hl-1">() {</span><br/><span class="hl-1">        </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">type</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-4">get</span><span class="hl-1"> </span><span class="hl-7">rarity</span><span class="hl-1">() {</span><br/><span class="hl-1">        </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">rarity</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-4">get</span><span class="hl-1"> </span><span class="hl-7">rulesText</span><span class="hl-1">() {</span><br/><span class="hl-1">        </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">rulesText</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-4">get</span><span class="hl-1"> </span><span class="hl-7">power</span><span class="hl-1">() {</span><br/><span class="hl-1">        </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">power</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-4">get</span><span class="hl-1"> </span><span class="hl-7">toughness</span><span class="hl-1">() {</span><br/><span class="hl-1">        </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">toughness</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-4">get</span><span class="hl-1"> </span><span class="hl-7">loyalty</span><span class="hl-1">() {</span><br/><span class="hl-1">        </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">loyalty</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-4">get</span><span class="hl-1"> </span><span class="hl-7">marketValue</span><span class="hl-1">() {</span><br/><span class="hl-1">        </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">marketValue</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-5">// Other getters for card properties...</span><br/><br/><span class="hl-1">    </span><span class="hl-5">/**</span><br/><span class="hl-5">     * Establece los datos de la carta.</span><br/><span class="hl-5">     * </span><span class="hl-4">@param</span><span class="hl-5"> </span><span class="hl-2">data</span><span class="hl-5"> Los nuevos datos de la carta.</span><br/><span class="hl-5">     */</span><br/><span class="hl-1">    </span><span class="hl-7">setData</span><span class="hl-1">(</span><span class="hl-2">data</span><span class="hl-1">: </span><span class="hl-6">CardData</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">data</span><span class="hl-1"> = </span><span class="hl-2">data</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-5">/**</span><br/><span class="hl-5">     * Convierte la carta a formato JSON.</span><br/><span class="hl-5">     * </span><span class="hl-4">@returns</span><span class="hl-5"> Los datos de la carta en formato JSON.</span><br/><span class="hl-5">     */</span><br/><span class="hl-1">    </span><span class="hl-7">toJSON</span><span class="hl-1">(): </span><span class="hl-6">CardData</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">data</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-5">/**</span><br/><span class="hl-5">     * Crea una instancia de Card a partir de datos en formato JSON.</span><br/><span class="hl-5">     * </span><span class="hl-4">@param</span><span class="hl-5"> </span><span class="hl-2">json</span><span class="hl-5"> Los datos de la carta en formato JSON.</span><br/><span class="hl-5">     * </span><span class="hl-4">@returns</span><span class="hl-5"> Una nueva instancia de Card.</span><br/><span class="hl-5">     */</span><br/><span class="hl-1">    </span><span class="hl-4">static</span><span class="hl-1"> </span><span class="hl-7">fromJSON</span><span class="hl-1">(</span><span class="hl-2">json</span><span class="hl-1">: </span><span class="hl-6">CardData</span><span class="hl-1">): </span><span class="hl-6">Card</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-7">Card</span><span class="hl-1">(</span><span class="hl-2">json</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<a id="md:3-tests-realizados-" class="tsd-anchor"></a><h2><a href="#md:3-tests-realizados-">3. Tests realizados <a name="tests"></a></a></h2><p>El conjunto de pruebas proporcionado abarca varios aspectos, desde la creación y manipulación de cartas hasta la interacción con el servidor y el administrador de archivos. A continuación, se presenta un análisis detallado de cada conjunto de pruebas:</p>
<p><strong>Pruebas para la Clase Card:</strong></p>
<p>Creación de Instancia: Esta prueba verifica si se puede crear correctamente una instancia de la clase Card utilizando datos válidos de una carta. Se espera que la instancia creada sea un objeto de tipo Card.
Comprobación de Atributos: Se realizan tres pruebas separadas para verificar que los atributos de las cartas de diferentes tipos se asignan correctamente a las instancias de Card. Cada prueba evalúa si los atributos de la carta creada coinciden con los datos proporcionados.</p>
<p><strong>Pruebas para el FileManager:</strong>
Agregar Carta: Verifica si se puede agregar una carta al sistema de archivos utilizando el método addCard del FileManager. Se espera que la operación se realice sin errores.
Eliminar Carta: Prueba la funcionalidad de eliminación de una carta del sistema de archivos utilizando el método deleteCard. Se espera que la operación se realice sin errores.
Modificar Carta: Verifica si se puede modificar una carta en el sistema de archivos utilizando el método modifyCard. Se espera que la operación se realice sin errores.
Listar Cartas: Prueba la capacidad de listar todas las cartas de un usuario utilizando el método listCard. Se espera que la operación se realice sin errores y que el resultado sea un array de objetos CardData.
Mostrar Carta: Verifica si se puede mostrar una carta específica de un usuario utilizando el método showCard. Se espera que la operación se realice sin errores y que el resultado sea un objeto CardData.</p>
<p><strong>Pruebas para el Cliente:</strong>
Conexión al Servidor: Esta prueba verifica si el cliente puede conectarse al servidor. Se espera que la conexión se establezca correctamente.
Envío de Datos al Servidor: Verifica si el cliente puede enviar datos al servidor y recibir una respuesta. Se espera que el servidor reciba los datos correctamente y responda apropiadamente.</p>
<p>Se puede ver el código de dichas pruebas en este <a href="https://github.com/ULL-ESIT-INF-DSI-2324/ull-esit-inf-dsi-23-24-prct10-fs-proc-sockets-magic-app-IdairaReina/blob/main/tests/cliente-servidor.spec.ts">enlace</a>.</p>
<a id="md:4-ejercicios-realizados-durante-la-sesión-de-práctica-" class="tsd-anchor"></a><h2><a href="#md:4-ejercicios-realizados-durante-la-sesión-de-práctica-">4. Ejercicios realizados durante la sesión de práctica <a name="pe102"></a></a></h2><p>El ejercicio propuesto en clase consistía en la modificacion de una de las funciones principales de la práctica 9, implementandola siguiendo el patrón callback y luego sustituir la invocación de métodos del API sincrona de Node.js de gestión del sistema de ficheros por llamadas a los métodos equivalentes del API asíncrona basada en callbacks.</p>
<p>la implementacion realizada fue la siguiente:</p>
<pre><code class="language-ts"><span class="hl-7">removeCardFromCollection</span><span class="hl-1">(</span><span class="hl-2">id</span><span class="hl-1">: </span><span class="hl-2">number</span><span class="hl-1">, </span><span class="hl-2">userName</span><span class="hl-1">: </span><span class="hl-2">string</span><span class="hl-1">, </span><span class="hl-2">callback</span><span class="hl-1">: (</span><span class="hl-2">error</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1"> | </span><span class="hl-6">undefined</span><span class="hl-1">, </span><span class="hl-2">respuesta</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1"> | </span><span class="hl-6">undefined</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-4">void</span><span class="hl-1">): </span><span class="hl-4">void</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">userDirectory</span><span class="hl-1"> = </span><span class="hl-3">`users/</span><span class="hl-4">${</span><span class="hl-2">userName</span><span class="hl-4">}</span><span class="hl-3">`</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">filePath</span><span class="hl-1"> = </span><span class="hl-3">`</span><span class="hl-4">${</span><span class="hl-2">userDirectory</span><span class="hl-4">}</span><span class="hl-3">/</span><span class="hl-4">${</span><span class="hl-2">id</span><span class="hl-4">}</span><span class="hl-3">.json`</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><br/><span class="hl-1">        </span><span class="hl-5">// Verificar si el archivo JSON existe</span><br/><span class="hl-1">        </span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-7">access</span><span class="hl-1">(</span><span class="hl-2">filePath</span><span class="hl-1">, </span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-2">constants</span><span class="hl-1">.</span><span class="hl-8">F_OK</span><span class="hl-1">, (</span><span class="hl-2">errAccess</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">errAccess</span><span class="hl-1">) {</span><br/><span class="hl-1">                </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">errorMessage</span><span class="hl-1"> = </span><span class="hl-3">`Card with ID </span><span class="hl-4">${</span><span class="hl-2">id</span><span class="hl-4">}</span><span class="hl-3"> does not exist in the collection!`</span><span class="hl-1">;</span><br/><span class="hl-1">                </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-7">red</span><span class="hl-1">(</span><span class="hl-2">errorMessage</span><span class="hl-1">));</span><br/><span class="hl-1">                </span><span class="hl-7">callback</span><span class="hl-1">(</span><span class="hl-2">errorMessage</span><span class="hl-1">, </span><span class="hl-4">undefined</span><span class="hl-1">);</span><br/><span class="hl-1">            } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-5">// Eliminar el archivo</span><br/><span class="hl-1">                </span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-7">unlink</span><span class="hl-1">(</span><span class="hl-2">filePath</span><span class="hl-1">, (</span><span class="hl-2">errUnlink</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">errUnlink</span><span class="hl-1">) {</span><br/><span class="hl-1">                        </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">errorMessage</span><span class="hl-1"> = </span><span class="hl-3">`Error deleting card with ID </span><span class="hl-4">${</span><span class="hl-2">id</span><span class="hl-4">}</span><span class="hl-3">: </span><span class="hl-4">${</span><span class="hl-2">errUnlink</span><span class="hl-9">.</span><span class="hl-2">message</span><span class="hl-4">}</span><span class="hl-3">`</span><span class="hl-1">;</span><br/><span class="hl-1">                        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">error</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-7">red</span><span class="hl-1">(</span><span class="hl-2">errorMessage</span><span class="hl-1">));</span><br/><span class="hl-1">                        </span><span class="hl-7">callback</span><span class="hl-1">(</span><span class="hl-2">errorMessage</span><span class="hl-1">, </span><span class="hl-4">undefined</span><span class="hl-1">);</span><br/><span class="hl-1">                    } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">                        </span><span class="hl-0">try</span><span class="hl-1"> {</span><br/><span class="hl-1">                            </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">cards</span><span class="hl-1">.</span><span class="hl-7">delete</span><span class="hl-1">(</span><span class="hl-2">id</span><span class="hl-1">);</span><br/><span class="hl-1">                            </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-7">green</span><span class="hl-1">(</span><span class="hl-3">`Card with ID </span><span class="hl-4">${</span><span class="hl-2">id</span><span class="hl-4">}</span><span class="hl-3"> successfully deleted from collection!`</span><span class="hl-1">));</span><br/><span class="hl-1">                            </span><span class="hl-7">callback</span><span class="hl-1">(</span><span class="hl-4">undefined</span><span class="hl-1">, </span><span class="hl-3">&quot;`Card with ID ${id} successfully deleted from collection!`&quot;</span><span class="hl-1"> );</span><br/><span class="hl-1">                        } </span><span class="hl-0">catch</span><span class="hl-1"> (</span><span class="hl-2">errDelete</span><span class="hl-1">) {</span><br/><span class="hl-1">                            </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">errorMessage</span><span class="hl-1"> = </span><span class="hl-3">`Error deleting card with ID </span><span class="hl-4">${</span><span class="hl-2">id</span><span class="hl-4">}</span><span class="hl-3"> from memory: </span><span class="hl-4">${</span><span class="hl-2">errDelete</span><span class="hl-9">.</span><span class="hl-2">message</span><span class="hl-4">}</span><span class="hl-3">`</span><span class="hl-1">;</span><br/><span class="hl-1">                            </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">error</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-7">red</span><span class="hl-1">(</span><span class="hl-2">errorMessage</span><span class="hl-1">));</span><br/><span class="hl-1">                            </span><span class="hl-7">callback</span><span class="hl-1">(</span><span class="hl-2">errorMessage</span><span class="hl-1">, </span><span class="hl-4">undefined</span><span class="hl-1">);</span><br/><span class="hl-1">                        }</span><br/><span class="hl-1">                    }</span><br/><span class="hl-1">                });</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">        });</span><br/><span class="hl-1">    }   </span>
</code><button>Copy</button></pre>
<a id="md:5-dificultades-y-conclusion-" class="tsd-anchor"></a><h2><a href="#md:5-dificultades-y-conclusion-">5. Dificultades y conclusion <a name="conclusion"></a></a></h2><p>Una de las partes más difíciles ha sido la coordinación entre el cliente y el servidor, asegurándose de que ambos se comuniquen correctamente y manejen los datos de manera adecuada. Esto ha requerido un entendimiento profundo de los protocolos de red y la implementación de lógica robusta para garantizar una comunicación fluida y confiable.</p>
<p>Otra de las dificultades fueron la gestión de tantos errores en la realización de la práctica, que no pude solucionar finalmente.</p>
<p>A pesar de los desafíos, esta práctica ha sido extremadamente valiosa para mi aprendizaje.</p>
<a id="md:7-referencias-" class="tsd-anchor"></a><h2><a href="#md:7-referencias-">7. Referencias <a name="referencias"></a></a></h2><ul>
<li><a href="https://ull-esit-inf-dsi-2324.github.io/prct10-fs-proc-sockets-magic-app/">Guión práctica 10</a></li>
<li><a href="https://ull-esit-inf-dsi-2324.github.io/nodejs-theory/">Apuntes sobre Node.js</a></li>
<li><a href="https://ull-esit-inf-dsi-2324.github.io/typescript-theory/typescript-project-setup.html">Guía para crear un proyecto</a></li>
<li><a href="https://drive.google.com/file/d/19LLLCuWg7u0TjjKz9q8ZhOXgbrKtPUme/view">Tutorial de instalación y configuracion Typedoc</a></li>
<li><a href="https://drive.google.com/file/d/1-z1oNOZP70WBDyhaaUijjHvFtqd6eAmJ/view">Tutorial de instalación y configuración de Mocha y Chai en Typescript</a></li>
<li><a href="https://drive.google.com/file/d/1FLPargdPBX6JaJ_85jNsRzxe34sMi-Z3/view">Tutorial de instalación y configuración Workflow GH Actions Sonar-Cloud</a></li>
<li><a href="https://drive.google.com/file/d/1yOonmpVbOyvzx3ZbXMQTAPxvA3a7AE7w/view">Tutorial de instalación y configuración Workflow GH Actions Coveralls</a></li>
<li><a href="https://ull-esit-inf-dsi-2324.github.io/typescript-theory/typescript-solid.html">Principios SOLID</a></li>
<li><a href="https://typedoc.org/guides/installation/">Guia de Typedoc</a></li>
<li><a href="https://www.npmjs.com/package/yargs">Yargs. Pagina oficial npm</a></li>
<li><a href="https://www.npmjs.com/package/chalk">Chalk. Pagina oficial npm</a></li>
</ul>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-index-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><h4 class="uppercase">Member Visibility</h4><form><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div><div class="tsd-theme-toggle"><h4 class="uppercase">Theme</h4><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-index-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:práctica-10---aplicación-cliente-servidor-para-coleccionistas-de-cartas-magic"><span>Práctica 10 -<wbr/> <wbr/>Aplicación cliente-<wbr/>servidor para coleccionistas de cartas <wbr/>Magic</span></a><ul><li><a href="#md:índice"><span>Índice</span></a></li><li><a href="#md:1-introducción-"><span>1. <wbr/>Introducción </span></a></li><li><a href="#md:2-desarrollo-de-la-aplicación-"><span>2. <wbr/>Desarrollo de la aplicación </span></a></li><li><ul><li><a href="#md:filemanagerts"><span>filemanager.ts</span></a></li><li><a href="#md:clientts"><span>client.ts</span></a></li><li><a href="#md:serverts"><span>server.ts</span></a></li><li><a href="#md:cardts"><span>card.ts</span></a></li></ul></li><li><a href="#md:3-tests-realizados-"><span>3. <wbr/>Tests realizados </span></a></li><li><a href="#md:4-ejercicios-realizados-durante-la-sesión-de-práctica-"><span>4. <wbr/>Ejercicios realizados durante la sesión de práctica </span></a></li><li><a href="#md:5-dificultades-y-conclusion-"><span>5. <wbr/>Dificultades y conclusion </span></a></li><li><a href="#md:7-referencias-"><span>7. <wbr/>Referencias </span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="index.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>ull-esit-inf-dsi-23-24-prct10-fs-proc-sockets-magic-app-idairareina</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><div class="tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div></body></html>